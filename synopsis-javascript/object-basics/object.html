<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial=scale=1.0">

  <title>Объекты</title>
  
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/fonts.css">
  <link rel="shortcut icon" href="../img/iconfinder_graduation_cap.png">
</head>

<body>
  <div class="page-wrapper">
    <div class="page">
      <div class="main__header">
        <div class="main__header-group">
          <ol class="breadcrumbs">
            <li class="breadcrumbs__item breadcrumbs__item_home">
              <a class="breadcrumbs__link" title="Оглавление" href="../index.html"></a>
            </li>
            <li class="breadcrumbs__item"></li>
          </ol>
          <div class="updated-at">
            <div class="updated-at__content">21-го июля 2020</div>
          </div>
        </div>
        <h1 class="page__title">Объекты</h1>
      </div>
      <div itemprop="articleBody">
        <p>Как мы знаем из главы <a href="../first-steps/types.html">Типы данных</a>, в JavaScript существует 8 типов данных. Семь из них называются «примитивными», так как содержат только одно значение (будь то строка, число или что-то другое).</p>
        <p>Объекты же используются для хранения коллекций различных значений и более сложных сущностей. В JavaScript объекты используются очень часто, это одна из основ языка. Поэтому мы должны понять их, прежде чем углубляться куда-либо ещё.</p>
        <p>Объект может быть создан с помощью фигурных скобок <code>{…}</code> с необязательным списком <em>свойств</em>. Свойство – это пара «ключ: значение», где <code>ключ</code> – это строка (также называемая «именем свойства»), а <code>значение</code> может быть чем угодно.</p>
        <p>Мы можем представить объект в виде ящика с подписанными папками. Каждый элемент данных хранится в своей папке, на которой написан ключ. По ключу папку легко найти, удалить или добавить в неё что-либо.</p>
        <div class="image" style="width: 176px">
          <iframe style="width: 176px; height: calc(183px + 4px)" src="../object-basics/object/object.html"></iframe>
          <div class="image__ratio" style="padding-top: 106.25%"></div>
        </div>
        <p>Пустой объект («пустой ящик») можно создать, используя один из двух вариантов синтаксиса:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token keyword">new</code> <code class="token class-name">Object</code><code class="token punctuation">(</code><code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// синтаксис "конструктор объекта"</code>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>  <code class="token comment">// синтаксис "литерал объекта"</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="image" style="width: 248px">
          <iframe style="width: 248px; height: calc(92px + 4px)" src="../object-basics/object/object-user-empty.html"></iframe>
          <div class="image__ratio" style="padding-top: 38.70967741935%"></div>
        </div>
        <p>Обычно используют вариант с фигурными скобками <code>{...}</code>. Такое объявление называют <em>литералом объекта</em> или <em>литеральной нотацией</em>.</p>
        <h2>Литералы и свойства</h2>
        <p>При использовании литерального синтаксиса <code>{...}</code> мы сразу можем поместить в объект несколько свойств в виде пар «ключ: значение»:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>     <code class="token comment">// объект</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>  <code class="token comment">// под ключом "name" хранится значение "John"</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code>        <code class="token comment">// под ключом "age" хранится значение 30</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Свойства объекта также иногда называют <em>полями объекта</em>.</p>
        <p>У каждого свойства есть ключ (также называемый «имя» или «идентификатор»). После имени свойства следует двоеточие <code>":"</code>, и затем указывается значение свойства. Если в объекте несколько свойств, то они перечисляются через запятую.</p>
        <p>В объекте <code>user</code> сейчас находятся два свойства:</p>
        <ol>
          <li>Первое свойство с именем <code>"name"</code> и значением <code>"John"</code>.</li>
          <li>Второе свойство с именем <code>"age"</code> и значением <code>30</code>.</li>
        </ol>
        <p>Можно сказать, что наш объект <code>user</code> – это ящик с двумя папками, подписанными «name» и «age».</p>
        <div class="image" style="width: 248px">
          <iframe style="width: 248px; height: calc(173px + 4px)" src="../object-basics/object/object-user.html"></iframe>
          <div class="image__ratio" style="padding-top: 71.37096774194%"></div>
        </div>
        <p>Мы можем в любой момент добавить в него новые папки, удалить папки или прочитать содержимое любой папки.</p>
        <p>Для обращения к свойствам используется запись «через точку»:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token comment">// получаем свойства объекта:</code>
<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>name <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// John</code>
<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>age <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 30</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Значение может быть любого типа. Давайте добавим свойство с логическим значением:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
user<code class="token punctuation">.</code>isAdmin <code class="token operator">=</code> <code class="token boolean">true</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="image" style="width: 248px">
          <iframe style="width: 248px; height: calc(173px + 4px)" src="../object-basics/object/object-user-isadmin.html"></iframe>
          <div class="image__ratio" style="padding-top: 71.37096774194%"></div>
        </div>
        <p>Для удаления свойства мы можем использовать оператор <code>delete</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">delete</code> user<code class="token punctuation">.</code>age<code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="image" style="width: 248px">
          <iframe style="width: 248px; height: calc(173px + 4px)" src="../object-basics/object/object-user-delete.html"></iframe>
          <div class="image__ratio" style="padding-top: 71.37096774194%"></div>
        </div>
        <p>Имя свойства может состоять из нескольких слов, но тогда оно должно быть заключено в кавычки:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code><code class="token punctuation">,</code>
  <code class="token string">"likes birds"</code><code class="token punctuation">:</code> <code class="token boolean">true</code>  <code class="token comment">// имя свойства из нескольких слов должно быть в кавычках</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="image" style="width: 248px">
          <iframe style="width: 248px; height: calc(215px + 4px)" src="../object-basics/object/object-user-props.html"></iframe>
          <div class="image__ratio" style="padding-top: 88.3064516129%"></div>
        </div>
        <p>Последнее свойство объекта может заканчиваться запятой:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
             <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
    name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
    age<code class="token punctuation">:</code> <code class="token number">30</code><code class="token punctuation">,</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Это называется «висячая запятая». Такой подход упрощает добавление, удаление и перемещение свойств, так как все строки объекта становятся одинаковыми.</p>
        <h2>Квадратные скобки</h2>
        <p>Для свойств, имена которых состоят из нескольких слов, доступ к значению «через точку» не работает:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token comment">// это вызовет синтаксическую ошибку</code>
user<code class="token punctuation">.</code>likes birds <code class="token operator">=</code> <code class="token boolean">true</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <p>JavaScript видит, что мы обращаемся к свойству <code>user.likes</code>, а затем идёт непонятное слово <code>birds</code>. В итоге синтаксическая ошибка.</p>
        <p>Точка требует, чтобы ключ был именован по правилам именования переменных. То есть не имел пробелов, не начинался с цифры и не содержал специальные символы, кроме <code>$</code> и <code>_</code>.</p>
        <p>Для таких случаев существует альтернативный способ доступа к свойствам через квадратные скобки. Такой способ сработает с любым именем свойства:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token comment">// присваивание значения свойству</code>
user<code class="token punctuation">[</code><code class="token string">"likes birds"</code><code class="token punctuation">]</code> <code class="token operator">=</code> <code class="token boolean">true</code><code class="token punctuation">;</code>

<code class="token comment">// получение значения свойства</code>
<code class="token function">alert</code><code class="token punctuation">(</code>user<code class="token punctuation">[</code><code class="token string">"likes birds"</code><code class="token punctuation">]</code><code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>

<code class="token comment">// удаление свойства</code>
<code class="token keyword">delete</code> user<code class="token punctuation">[</code><code class="token string">"likes birds"</code><code class="token punctuation">]</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(10);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Сейчас всё в порядке.</p>
        <p>Обратите внимание, что строка в квадратных скобках закавычена (подойдёт любой тип кавычек).</p>
        <p>Квадратные скобки также позволяют обратиться к свойству, имя которого может быть результатом выражения. Например, имя свойства может храниться в переменной:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> key <code class="token operator">=</code> <code class="token string">"likes birds"</code><code class="token punctuation">;</code>

<code class="token comment">// то же самое, что и user["likes birds"] = true;</code>
user<code class="token punctuation">[</code>key<code class="token punctuation">]</code> <code class="token operator">=</code> <code class="token boolean">true</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </pre>
          </div>
        </div>
        <p>Здесь переменная <code>key</code> может быть вычислена во время выполнения кода или зависеть от пользовательского ввода. После этого мы используем её для доступа к свойству. Это даёт нам большую гибкость.</p>
        <p>Пример:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> key <code class="token operator">=</code> <code class="token function">prompt</code><code class="token punctuation">(</code><code class="token string">"Что вы хотите узнать о пользователе?"</code><code class="token punctuation">,</code> <code class="token string">"name"</code><code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token comment">// доступ к свойству через переменную</code>
<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">[</code>key<code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// John (если ввели "name")</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(9);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Запись «через точку» такого не позволяет:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> key <code class="token operator">=</code> <code class="token string">"name"</code><code class="token punctuation">;</code>
<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>key <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// undefined</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <h3>Вычисляемые свойства</h3>
        <p>Мы можем использовать квадратные скобки в литеральной нотации для создания <em>вычисляемого свойства</em>.</p>
        <p>Пример:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> fruit <code class="token operator">=</code> <code class="token function">prompt</code><code class="token punctuation">(</code><code class="token string">"Какой фрукт купить?"</code><code class="token punctuation">,</code> <code class="token string">"apple"</code><code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> bag <code class="token operator">=</code> <code class="token punctuation">{</code>
  <code class="token punctuation">[</code>fruit<code class="token punctuation">]</code><code class="token punctuation">:</code> <code class="token number">5</code><code class="token punctuation">,</code> <code class="token comment">// имя свойства будет взято из переменной fruit</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> bag<code class="token punctuation">.</code>apple <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 5, если fruit="apple"</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Смысл вычисляемого свойства прост: запись <code>[fruit]</code> означает, что имя свойства необходимо взять из переменной <code>fruit</code>.</p>
        <p>И если посетитель введёт слово <code>"apple"</code>, то в объекте <code>bag</code> теперь будет лежать свойство <code>{apple: 5}</code>.</p>
        <p>По сути, пример выше работает так же, как и следующий пример:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> fruit <code class="token operator">=</code> <code class="token function">prompt</code><code class="token punctuation">(</code><code class="token string">"Какой фрукт купить?"</code><code class="token punctuation">,</code> <code class="token string">"apple"</code><code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> bag <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token comment">// имя свойства будет взято из переменной fruit</code>
bag<code class="token punctuation">[</code>fruit<code class="token punctuation">]</code> <code class="token operator">=</code> <code class="token number">5</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <p>…Но первый пример выглядит лаконичнее.</p>
        <p>Мы можем использовать и более сложные выражения в квадратных скобках:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> fruit <code class="token operator">=</code> <code class="token string">'apple'</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> bag <code class="token operator">=</code> <code class="token punctuation">{</code>
<code class="token punctuation">[</code>fruit <code class="token operator">+</code> <code class="token string">'Computers'</code><code class="token punctuation">]</code><code class="token punctuation">:</code> <code class="token number">5</code> <code class="token comment">// bag.appleComputers = 5</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Квадратные скобки дают намного больше возможностей, чем запись через точку. Они позволяют использовать любые имена свойств и переменные, хотя и требуют более громоздких конструкций кода.</p>
        <p>Подведём итог: в большинстве случаев, когда имена свойств известны и просты, используется запись через точку. Если же нам нужно что-то более сложное, то мы используем квадратные скобки.</p>
        <h2>Свойство из переменной</h2>
        <p>В реальном коде часто нам необходимо использовать существующие переменные как значения для свойств с тем же именем.</p>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">function</code> <code class="token function">makeUser</code><code class="token punctuation">(</code><code class="token parameter">name<code class="token punctuation">,</code> age</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token keyword">return</code> <code class="token punctuation">{</code>
    name<code class="token punctuation">:</code> name<code class="token punctuation">,</code>
    age<code class="token punctuation">:</code> age
    <code class="token comment">// ...другие свойства</code>
  <code class="token punctuation">}</code><code class="token punctuation">;</code>
<code class="token punctuation">}</code>

<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token function">makeUser</code><code class="token punctuation">(</code><code class="token string">"John"</code><code class="token punctuation">,</code> <code class="token number">30</code><code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token function">alert</code><code class="token punctuation">(</code>user<code class="token punctuation">.</code>name<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// John</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(10);</script>
              </span>
            </div>
          </div>
        </div>
        <p>В примере выше название свойств <code>name</code> и <code>age</code> совпадают с названиями переменных, которые мы подставляем в качестве значений этих свойств. Такой подход настолько распространён, что существуют специальные <em>короткие свойства</em> для упрощения этой записи.</p>
        <p>Вместо <code>name:name</code> мы можем написать просто <code>name</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">function</code> <code class="token function">makeUser</code><code class="token punctuation">(</code><code class="token parameter">name<code class="token punctuation">,</code> age</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token keyword">return</code> <code class="token punctuation">{</code>
    name<code class="token punctuation">,</code> <code class="token comment">// то же самое, что и name: name</code>
    age   <code class="token comment">// то же самое, что и age: age</code>
    <code class="token comment">// ...</code>
  <code class="token punctuation">}</code><code class="token punctuation">;</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Мы можем использовать как обычные свойства, так и короткие в одном и том же объекте:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">,</code>  <code class="token comment">// тоже самое, что и name:name</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <h2>Ограничения на имена свойств</h2>
        <p>Мы можем использовать только строки и символы в качестве ключей свойств. Все другие типы данных будут автоматически преобразованы к строке.</p>
        <p>Например, если использовать как ключ число <code>0</code>, то оно превратится в строку <code>"0"</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> obj <code class="token operator">=</code> <code class="token punctuation">{</code>
  <code class="token number">0</code><code class="token punctuation">:</code> <code class="token string">"Тест"</code> <code class="token comment">// то же самое что и "0": "Тест"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token comment">// обе функции alert выведут одно и то же свойство (число 0 преобразуется в строку "0")</code>
<code class="token function">alert</code><code class="token punctuation">(</code> obj<code class="token punctuation">[</code><code class="token string">"0"</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// Тест</code>
<code class="token function">alert</code><code class="token punctuation">(</code> obj<code class="token punctuation">[</code><code class="token number">0</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// Тест (то же свойство)</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p><strong>Зарезервированные слова разрешено использовать как имена свойств.</strong></p>
        <p>Как мы уже знаем, имя переменной не может совпадать с зарезервированными словами, такими как «for», «let», «return» и т.д.</p>
        <p>Но для свойств объекта такого ограничения нет:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> obj <code class="token operator">=</code> <code class="token punctuation">{</code>
  <code class="token keyword">for</code><code class="token punctuation">:</code> <code class="token number">1</code><code class="token punctuation">,</code>
  <code class="token keyword">let</code><code class="token punctuation">:</code> <code class="token number">2</code><code class="token punctuation">,</code>
  <code class="token keyword">return</code><code class="token punctuation">:</code> <code class="token number">3</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> obj<code class="token punctuation">.</code>for <code class="token operator">+</code> obj<code class="token punctuation">.</code>let <code class="token operator">+</code> obj<code class="token punctuation">.</code>return <code class="token punctuation">)</code><code class="token punctuation">;</code>  <code class="token comment">// 6</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p><strong>В принципе, разрешены любые имена свойств, но есть специальное свойство <code>__proto__</code>, которое по историческим причинам имеет  особое поведение.</strong></p>
        <p>Например, его значение всегда должно быть объектом:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> obj <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>
obj<code class="token punctuation">.</code>__proto__ <code class="token operator">=</code> <code class="token number">5</code><code class="token punctuation">;</code>
<code class="token function">alert</code><code class="token punctuation">(</code>obj<code class="token punctuation">.</code>__proto__<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// [object Object], работает не так, как мы ожидали</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Как мы видим, присвоение примитивного значения <code>5</code> игнорируется.</p>
        <p>Мы более подробно исследуем происходящее свойство <code>__proto__</code> позже, в главе <a href="/prototype-inheritance">Прототипное наследование</a>.</p>
        <p>Сейчас важно знать, что такое поведение <code>__proto__</code> может стать источником ошибок и даже уязвимостей, если мы намереваемся хранить в объекте произвольные данные и позволяем посетителям указывать ключи.</p>
        <p>Посетитель может указать <code>"__proto__"</code> в качестве ключа, и логика присваивания будет нарушена (как показано выше).</p>
        <p>Позже мы изучим, как обойти эту проблему:</p>
        <ol>
          <li>Можно заставить объект обрабатывать <code>__proto__</code> как обычное свойство, мы это увидим в главе <a href="/prototype-methods">Методы прототипов, объекты без свойства __proto__</a>.</li>
          <li>Есть другая структура данных <a href="/map-set">Map</a>, которую мы изучим в главе <a href="/map-set">Map и Set</a>, она поддерживает произвольные ключи.</li>
        </ol>
        <h2>Проверка существования свойства, оператор «in»</h2>
        <p>Особенность объектов в том, что можно получить доступ к любому свойству. Даже если свойства не существует – ошибки не будет! При обращении к свойству, которого нет, возвращается <code>undefined</code>. Это позволяет просто проверить существование свойства – сравнением его с <code>undefined</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <DIV class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>noSuchProperty <code class="token operator">===</code> <code class="token keyword">undefined</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true означает "свойства нет"</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </DIV>
          </div>
        </div>
        <p>Также существует специальный оператор <code>"in"</code> для проверки существования свойства в объекте.</p>
        <p>Синтаксис оператора:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token string">"key"</code> <code class="token keyword">in</code> object
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Пример:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code> name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code> age<code class="token punctuation">:</code> <code class="token number">30</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"age"</code> <code class="token keyword">in</code> user <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, user.age существует</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"blabla"</code> <code class="token keyword">in</code> user <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// false, user.blabla не существует</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Обратите внимание, что слева от оператора <code>in</code> должно быть <em>имя свойства</em>. Обычно это строка в кавычках.</p>
        <p>Если мы опускаем кавычки, это значит, что мы указываем переменную, в которой находится имя свойства. Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code> age<code class="token punctuation">:</code> <code class="token number">30</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> key <code class="token operator">=</code> <code class="token string">"age"</code><code class="token punctuation">;</code>
<code class="token function">alert</code><code class="token punctuation">(</code> key <code class="token keyword">in</code> user <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, имя свойства было взято из переменной key</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="important important_smart">
          <div class="important__header">
            <span class="important__type">Оператор «in» для свойств со значением <em>„undefined“</em></span>
          </div>
          <div class="important__content"><p>Обычно строгого сравнения <code>"=== undefined"</code> достаточно для проверки наличия свойства. Но есть особый случай, когда оно не подходит, и нужно использовать <code>"in"</code>.</p>
            <p>Это когда свойство существует, но содержит значение <code>undefined</code>:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token keyword">let</code> obj <code class="token operator">=</code> <code class="token punctuation">{</code>
  test<code class="token punctuation">:</code> <code class="token keyword">undefined</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> obj<code class="token punctuation">.</code>test <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// выведет undefined, значит свойство не существует?</code>

<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"test"</code> <code class="token keyword">in</code> obj <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, свойство существует!</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(7);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>В примере выше свойство <code>obj.test</code> технически существует в объекте. Оператор <code>in</code> сработал правильно.</p>
            <p>Подобные ситуации случаются очень редко, так как <code>undefined</code> обычно явно не присваивается. Для «неизвестных» или «пустых» свойств мы используем значение <code>null</code>. Таким образом, оператор <code>in</code> является экзотическим гостем в коде.</p>
          </div>
        </div>
        <h2>Цикл «for…in»</h2>
        <p>Для перебора всех свойств объекта используется цикл <code>for..in</code>. Этот цикл отличается от изученного ранее цикла <code>for(;;)</code>.</p>
        <p>Синтаксис:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
  <pre>
<code class="token keyword">for</code> <code class="token punctuation">(</code>key <code class="token keyword">in</code> object<code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token comment">// тело цикла выполняется для каждого свойства объекта</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>К примеру, давайте выведем все свойства объекта <code>user</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code><code class="token punctuation">,</code>
  isAdmin<code class="token punctuation">:</code> <code class="token boolean">true</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> key <code class="token keyword">in</code> user<code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token comment">// ключи</code>
  <code class="token function">alert</code><code class="token punctuation">(</code> key <code class="token punctuation">)</code><code class="token punctuation">;</code>  <code class="token comment">// name, age, isAdmin</code>
  <code class="token comment">// значения ключей</code>
  <code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">[</code>key<code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// John, 30, true</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(12);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Обратите внимание, что все конструкции «for» позволяют нам объявлять переменную внутри цикла, как, например, <code>let key</code> здесь.</p>
        <p>Кроме того, мы могли бы использовать другое имя переменной. Например, часто используется вариант <code>"for (let prop in obj)"</code>.</p>
        <h3>Упорядочение свойств объекта</h3>
        <p>Упорядочены ли свойства объекта? Другими словами, если мы будем в цикле перебирать все свойства объекта, получим ли мы их в том же порядке, в котором мы их добавляли? Можем ли мы на это рассчитывать?</p>
        <p>Короткий ответ: свойства упорядочены особым образом: свойства с целочисленными ключами сортируются по возрастанию, остальные располагаются в порядке создания. Разберёмся подробнее.</p>
        <p>В качестве примера рассмотрим объект с телефонными кодами:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> codes <code class="token operator">=</code> <code class="token punctuation">{</code>
  <code class="token string">"49"</code><code class="token punctuation">:</code> <code class="token string">"Германия"</code><code class="token punctuation">,</code>
  <code class="token string">"41"</code><code class="token punctuation">:</code> <code class="token string">"Швейцария"</code><code class="token punctuation">,</code>
  <code class="token string">"44"</code><code class="token punctuation">:</code> <code class="token string">"Великобритания"</code><code class="token punctuation">,</code>
  <code class="token comment">// ..,</code>
  <code class="token string">"1"</code><code class="token punctuation">:</code> <code class="token string">"США"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> code <code class="token keyword">in</code> codes<code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code>code<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 1, 41, 44, 49</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(11);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Если мы делаем сайт для немецкой аудитории, то, вероятно, мы хотим, чтобы код <code>49</code> был первым.</p>
        <p>Но если мы запустим код, мы увидим совершенно другую картину:</p>
        <ul>
          <li>США (1) идёт первым</li>
          <li>затем Швейцария (41) и так далее.</li>
        </ul>
        <p>Телефонные коды идут в порядке возрастания, потому что они являются целыми числами: <code>1, 41, 44, 49</code>.</p>
        <div class="important important_smart">
          <div class="important__header">
            <span class="important__type">Целочисленные свойства? Это что?</span>
          </div>
          <div class="important__content">
            <p>Термин «целочисленное свойство» означает строку, которая может быть преобразована в целое число и обратно без изменений.</p>
            <p>То есть, <code>"49"</code> – это целочисленное имя свойства, потому что если его преобразовать в целое число, а затем обратно в строку, то оно не изменится. А вот свойства <code>"+49"</code> или <code>"1.2"</code> таковыми не являются:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token comment">// Math.trunc - встроенная функция, которая удаляет десятичную часть</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token function">String</code><code class="token punctuation">(</code>Math<code class="token punctuation">.</code><code class="token function">trunc</code><code class="token punctuation">(</code><code class="token function">Number</code><code class="token punctuation">(</code><code class="token string">"49"</code><code class="token punctuation">)</code><code class="token punctuation">)</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "49", то же самое ⇒ свойство целочисленное</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token function">String</code><code class="token punctuation">(</code>Math<code class="token punctuation">.</code><code class="token function">trunc</code><code class="token punctuation">(</code><code class="token function">Number</code><code class="token punctuation">(</code><code class="token string">"+49"</code><code class="token punctuation">)</code><code class="token punctuation">)</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "49", не то же самое, что "+49" ⇒ свойство не целочисленное</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token function">String</code><code class="token punctuation">(</code>Math<code class="token punctuation">.</code><code class="token function">trunc</code><code class="token punctuation">(</code><code class="token function">Number</code><code class="token punctuation">(</code><code class="token string">"1.2"</code><code class="token punctuation">)</code><code class="token punctuation">)</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "1", не то же самое, что "1.2" ⇒ свойство не целочисленное</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(4);</script>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <p>…С другой стороны, если ключи не целочисленные, то они перебираются в порядке создания, например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  surname<code class="token punctuation">:</code> <code class="token string">"Smith"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
user<code class="token punctuation">.</code>age <code class="token operator">=</code> <code class="token number">25</code><code class="token punctuation">;</code> <code class="token comment">// добавим ещё одно свойство</code>

<code class="token comment">// не целочисленные свойства перечислены в порядке создания</code>
<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> prop <code class="token keyword">in</code> user<code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code> prop <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// name, surname, age</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(10);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Таким образом, чтобы решить нашу проблему с телефонными кодами, мы можем схитрить, сделав коды не целочисленными свойствами. Добавления знака <code>"+"</code> перед каждым кодом будет достаточно.</p>
        <p>Пример:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> codes <code class="token operator">=</code> <code class="token punctuation">{</code>
  <code class="token string">"+49"</code><code class="token punctuation">:</code> <code class="token string">"Германия"</code><code class="token punctuation">,</code>
  <code class="token string">"+41"</code><code class="token punctuation">:</code> <code class="token string">"Швейцария"</code><code class="token punctuation">,</code>
  <code class="token string">"+44"</code><code class="token punctuation">:</code> <code class="token string">"Великобритания"</code><code class="token punctuation">,</code>
  <code class="token comment">// ..,</code>
  <code class="token string">"+1"</code><code class="token punctuation">:</code> <code class="token string">"США"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> code <code class="token keyword">in</code> codes<code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code> <code class="token operator">+</code>code <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 49, 41, 44, 1</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(11);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Теперь код работает так, как мы задумывали.</p>
        <h2>Копирование по ссылке</h2>
        <p>Одним из фундаментальных отличий объектов от примитивных типов данных является то, что они хранятся и копируются «по ссылке».</p>
        <p>Примитивные типы: строки, числа, логические значения – присваиваются и копируются «по значению».</p>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> message <code class="token operator">=</code> <code class="token string">"Hello!"</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> phrase <code class="token operator">=</code> message<code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <p>В результате мы имеем две независимые переменные, каждая из которых хранит строку <code>"Hello!"</code>.</p>
        <div class="image" style="width: 359px">
          <iframe style="width: 359px; height: calc(143px + 4px)" src="../object-basics/object/variable-copy-value.html"></iframe>
          <div class="image__ratio" style="padding-top: 40.94707520891%"></div>
        </div>
        <p>Объекты ведут себя иначе.</p>
        <p><strong>Переменная хранит не сам объект, а его «адрес в памяти», другими словами «ссылку» на него.</strong></p>
        <p>Проиллюстрируем это:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="image" style="width: 370px">
          <iframe style="width: 359px; height: calc(249px + 4px)" src="../object-basics/object/variable-contains-reference.html"></iframe>
          <div class="image__ratio" style="padding-top: 68.37837837838%"></div>
        </div>
        <p>Сам объект хранится где-то в памяти. А в переменной <code>user</code> лежит «ссылка» на эту область памяти.</p>
        <p><strong>Когда переменная объекта копируется – копируется ссылка, сам же объект не дублируется.</strong></p>
        <p>Если мы представляем объект как ящик, то переменная – это ключ к нему. Копирование переменной дублирует ключ, но не сам ящик.</p>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code> name<code class="token punctuation">:</code> <code class="token string">"John"</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> admin <code class="token operator">=</code> user<code class="token punctuation">;</code> <code class="token comment">// копируется ссылка</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Теперь у нас есть две переменные, каждая из которых содержит ссылку на один и тот же объект:</p>
        <div class="image" style="width: 599px">
          <iframe style="width: 599px; height: calc(260px + 4px)" src="../object-basics/object/variable-copy-reference.html"></iframe>
          <div class="image__ratio" style="padding-top: 44.0734557596%"></div>
        </div>
        <p>Мы можем использовать любую из переменных для доступа к ящику и изменения его содержимого:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code> name<code class="token punctuation">:</code> <code class="token string">'John'</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> admin <code class="token operator">=</code> user<code class="token punctuation">;</code>

admin<code class="token punctuation">.</code>name <code class="token operator">=</code> <code class="token string">'Pete'</code><code class="token punctuation">;</code> <code class="token comment">// изменено по ссылке из переменной "admin"</code>

<code class="token function">alert</code><code class="token punctuation">(</code>user<code class="token punctuation">.</code>name<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 'Pete', изменения видны по ссылке из переменной "user"</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Приведённый выше пример демонстрирует, что объект только один. Как если бы у нас был один ящик с двумя ключами и мы использовали один из них (<code>admin</code>), чтобы войти в него и что-то изменить, а затем, открыв ящик другим ключом (<code>user</code>), мы бы увидели эти изменения.</p>
        <h3>Сравнение объектов</h3>
        <p>Операторы равенства <code>==</code> и строгого равенства <code>===</code> для объектов работают одинаково.</p>
        <p><strong>Два объекта равны только в том случае, если это один и тот же объект.</strong></p>
        <p>Например, две переменные ссылаются на один и тот же объект, они равны:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> a <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> b <code class="token operator">=</code> a<code class="token punctuation">;</code> <code class="token comment">// копирование по ссылке</code>

<code class="token function">alert</code><code class="token punctuation">(</code> a <code class="token operator">==</code> b <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, обе переменные ссылаются на один и тот же объект</code>
<code class="token function">alert</code><code class="token punctuation">(</code> a <code class="token operator">===</code> b <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <p>В примере ниже два разных объекта не равны, хотя и оба пусты:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> a <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> b <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code> <code class="token comment">// два независимых объекта</code>

<code class="token function">alert</code><code class="token punctuation">(</code> a <code class="token operator">==</code> b <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// false</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Для сравнений типа <code>obj1 &gt; obj2</code> или для сравнения с примитивом <code>obj == 5</code> объекты преобразуются в примитивы.</p>
        <p>Мы скоро изучим, как работают такие преобразования объектов, но, по правде говоря, сравнения такого рода необходимы очень редко и обычно являются результатом ошибки программиста.</p>
        <h3>Объекты-константы</h3>
        <p>Объект, объявленный через <code>const</code>, <em>может</em> быть изменён.</p>
        <p>Пример:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">const</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

user<code class="token punctuation">.</code>age <code class="token operator">=</code> <code class="token number">25</code><code class="token punctuation">;</code> <code class="token comment">// (*)</code>

<code class="token function">alert</code><code class="token punctuation">(</code>user<code class="token punctuation">.</code>age<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 25</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Может показаться, что строка <code>(*)</code> должна вызвать ошибку, но нет, здесь всё в порядке. Дело в том, что объявление <code>const</code> защищает от изменений только само значение <code>user</code>. А в нашем случае значение <code>user</code> – это ссылка на объект, и это значение мы не меняем. В строке <code>(*)</code> мы действуем <em>внутри</em> объекта, мы не переназначаем <code>user</code>.</p>
        <p>Если же мы попытаемся присвоить <code>user</code> другое значение, то <code>const</code> выдаст ошибку:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">const</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token comment">// Ошибка (нельзя переопределять константу user)</code>
  user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"Pete"</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(8);</script>
              </span>
            </div>
          </div>
        </div>
        <p>…Но что делать, если мы хотим сделать константами свойства объекта? Как сделать так, чтобы попытка изменить <code>user.age = 25</code> выдавала ошибку? Это тоже возможно. Мы рассмотрим эту тему в главе <a href="/property-descriptors">Флаги и дескрипторы свойств</a>.</p>
        <h2>Клонирование и объединение объектов, Object.assign</h2>
        <p>Как мы узнали ранее, при копировании переменной объекта создаётся ещё одна ссылка на тот же самый объект.</p>
        <p>Но что, если нам всё же нужно дублировать объект? Создать независимую копию, клон?</p>
        <p>Это выполнимо, но немного сложно, так как в JavaScript нет встроенного метода для этого. На самом деле, такая нужда возникает редко. В большинстве случаев нам достаточно копирования по ссылке.</p>
        <p>Но если мы действительно этого хотим, то нам нужно создавать новый объект и повторять структуру дублируемого объекта, перебирая его свойства и копируя их.</p>
        <p>Например так:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> clone <code class="token operator">=</code> <code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">;</code> <code class="token comment">// новый пустой объект</code>

<code class="token comment">// скопируем все свойства user в него</code>
<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> key <code class="token keyword">in</code> user<code class="token punctuation">)</code> <code class="token punctuation">{</code>
  clone<code class="token punctuation">[</code>key<code class="token punctuation">]</code> <code class="token operator">=</code> user<code class="token punctuation">[</code>key<code class="token punctuation">]</code><code class="token punctuation">;</code>
<code class="token punctuation">}</code>

<code class="token comment">// теперь в переменной clone находится абсолютно независимый клон объекта.</code>
clone<code class="token punctuation">.</code>name <code class="token operator">=</code> <code class="token string">"Pete"</code><code class="token punctuation">;</code> <code class="token comment">// изменим в нём данные</code>

<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>name <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// в оригинальном объекте значение свойства `name` осталось прежним – John.</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(16);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Кроме того, для этих целей мы можем использовать метод <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object/assign">Object.assign</a>.</p>
        <p>Синтаксис:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
Object<code class="token punctuation">.</code><code class="token function">assign</code><code class="token punctuation">(</code>dest<code class="token punctuation">,</code> <code class="token punctuation">[</code>src1<code class="token punctuation">,</code> src2<code class="token punctuation">,</code> src3<code class="token operator">...</code><code class="token punctuation">]</code><code class="token punctuation">)</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <ul>
          <li>Аргументы <code>dest</code>, и <code>src1, ..., srcN</code> (может быть столько, сколько нужно) являются объектами.</li>
          <li>Метод копирует свойства всех объектов <code>src1, ..., srcN</code> в объект <code>dest</code>. То есть, свойства всех перечисленных объектов, начиная со второго, копируются в первый объект. После копирования метод возвращает объект <code>dest</code>.</li>
        </ul>
        <p>Например, объединим несколько объектов в один:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code> name<code class="token punctuation">:</code> <code class="token string">"John"</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> permissions1 <code class="token operator">=</code> <code class="token punctuation">{</code> canView<code class="token punctuation">:</code> <code class="token boolean">true</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> permissions2 <code class="token operator">=</code> <code class="token punctuation">{</code> canEdit<code class="token punctuation">:</code> <code class="token boolean">true</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token comment">// копируем все свойства из permissions1 и permissions2 в user</code>
Object<code class="token punctuation">.</code><code class="token function">assign</code><code class="token punctuation">(</code>user<code class="token punctuation">,</code> permissions1<code class="token punctuation">,</code> permissions2<code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token comment">// now user = { name: "John", canView: true, canEdit: true }</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(9);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Если принимающий объект (<code>user</code>) уже имеет свойство с таким именем, оно будет перезаписано:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code> name<code class="token punctuation">:</code> <code class="token string">"John"</code> <code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token comment">// свойство name перезапишется, свойство isAdmin добавится</code>
Object<code class="token punctuation">.</code><code class="token function">assign</code><code class="token punctuation">(</code>user<code class="token punctuation">,</code> <code class="token punctuation">{</code> name<code class="token punctuation">:</code> <code class="token string">"Pete"</code><code class="token punctuation">,</code> isAdmin<code class="token punctuation">:</code> <code class="token boolean">true</code> <code class="token punctuation">}</code><code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token comment">// now user = { name: "Pete", isAdmin: true }</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(6);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Мы также можем использовать <code>Object.assign</code> для простого клонирования:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  age<code class="token punctuation">:</code> <code class="token number">30</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> clone <code class="token operator">=</code> Object<code class="token punctuation">.</code><code class="token function">assign</code><code class="token punctuation">(</code><code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">,</code> user<code class="token punctuation">)</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(6);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Все свойства объекта <code>user</code> будут скопированы в пустой объект, и ссылка на этот объект будет в переменной <code>clone</code>. На самом деле, такое клонирование работает так же, как и через цикл, но короче.</p>
        <p>До сих пор мы предполагали, что все свойства пользователя примитивны. Но свойства могут быть ссылками на другие объекты. Что с ними делать?</p>
        <p>Например, есть объект:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  sizes<code class="token punctuation">:</code> <code class="token punctuation">{</code>
    height<code class="token punctuation">:</code> <code class="token number">182</code><code class="token punctuation">,</code>
    width<code class="token punctuation">:</code> <code class="token number">50</code>
  <code class="token punctuation">}</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>sizes<code class="token punctuation">.</code>height <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 182</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(9);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Теперь при клонировании недостаточно просто скопировать <code>clone.sizes = user.sizes</code>, поскольку <code>user.sizes</code> – это объект, он будет скопирован по ссылке. А значит объекты <code>clone</code> и <code>user</code> в своих свойствах <code>sizes</code> будут ссылаться на один и тот же объект:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> user <code class="token operator">=</code> <code class="token punctuation">{</code>
  name<code class="token punctuation">:</code> <code class="token string">"John"</code><code class="token punctuation">,</code>
  sizes<code class="token punctuation">:</code> <code class="token punctuation">{</code>
    height<code class="token punctuation">:</code> <code class="token number">182</code><code class="token punctuation">,</code>
    width<code class="token punctuation">:</code> <code class="token number">50</code>
  <code class="token punctuation">}</code>
<code class="token punctuation">}</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> clone <code class="token operator">=</code> Object<code class="token punctuation">.</code><code class="token function">assign</code><code class="token punctuation">(</code><code class="token punctuation">{</code><code class="token punctuation">}</code><code class="token punctuation">,</code> user<code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> user<code class="token punctuation">.</code>sizes <code class="token operator">===</code> clone<code class="token punctuation">.</code>sizes <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, один и тот же объект</code>

<code class="token comment">// user и clone обращаются к одному sizes</code>
user<code class="token punctuation">.</code>sizes<code class="token punctuation">.</code>width<code class="token operator">++</code><code class="token punctuation">;</code>       <code class="token comment">// меняем свойство в одном объекте</code>
<code class="token function">alert</code><code class="token punctuation">(</code>clone<code class="token punctuation">.</code>sizes<code class="token punctuation">.</code>width<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 51, видим результат в другом объекте</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(15);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Чтобы исправить это, мы должны в цикле клонирования делать проверку, не является ли значение <code>user[key]</code> объектом, и если это так – копируем и его структуру тоже. Это называется «глубокое клонирование».</p>
        <p>Существует стандартный алгоритм глубокого клонирования, <a href="http://w3c.github.io/html/infrastructure.html#safe-passing-of-structured-data">Structured cloning algorithm</a>. Он решает описанную выше задачу, а также более сложные задачи. Чтобы не изобретать велосипед, мы можем использовать реализацию этого алгоритма из JavaScript-библиотеки <a href="https://lodash.com">lodash</a>, метод <a href="https://lodash.com/docs#cloneDeep">_.cloneDeep(obj)</a>.</p>
        <h2>Итого</h2>
        <p>Объекты – это ассоциативные массивы с рядом дополнительных возможностей.</p>
        <p>Они хранят свойства (пары ключ-значение), где:</p>
        <ul>
          <li>Ключи свойств должны быть строками или символами (обычно строками).</li>
          <li>Значения могут быть любого типа.</li>
        </ul>
        <p>Чтобы получить доступ к свойству, мы можем использовать:</p>
        <ul>
          <li>Запись через точку: <code>obj.property</code>.</li>
          <li>Квадратные скобки <code>obj["property"]</code>. Квадратные скобки позволяют взять ключ из переменной, например, <code>obj[varWithKey]</code>.</li>
        </ul>
        <p>Дополнительные операторы:</p>
        <ul>
          <li>Удаление свойства: <code>delete obj.prop</code>.</li>
          <li>Проверка существования свойства: <code>"key" in obj</code>.</li>
          <li>Перебор свойств объекта: цикл for <code>for (let key in obj)</code>.</li>
        </ul>
        <p>Объекты присваиваются и копируются по ссылке. Другими словами, переменная хранит не «значение объекта», а «ссылку» (адрес в памяти) на это значение. Поэтому копирование такой переменной или передача её в качестве аргумента функции приводит к копированию этой ссылки, а не самого объекта. Все операции с использованием скопированных ссылок (например, добавление или удаление свойств) выполняются с одним и тем же объектом.</p>
        <p>Чтобы сделать «настоящую копию» (клон), мы можем использовать <code>Object.assign</code> или <a href="https://lodash.com/docs#cloneDeep">_.cloneDeep(obj)</a>.</p>
        <p>То, что мы изучали в этой главе, называется «простым объектом» («plain object») или просто <code>Object</code>.</p>
        <p>В JavaScript есть много других типов объектов:</p>
        <ul>
          <li><code>Array</code> для хранения упорядоченных коллекций данных,</li>
          <li><code>Date</code> для хранения информации о дате и времени,</li>
          <li><code>Error</code> для хранения информации об ошибке.</li>
          <li>… и так далее.</li>
        </ul>
        <p>У них есть свои особенности, которые мы изучим позже. Иногда люди говорят что-то вроде «тип данных Array» или «тип данных Date», но формально они не являются отдельными типами, а относятся к типу данных <code>Object</code>. Они лишь расширяют его различными способами.</p>
        <p>Объекты в JavaScript очень мощные. Здесь мы только немного углубились в действительно огромную тему. Мы будем плотно работать с объектами и узнаем о них больше в следующих частях учебника.</p>
      </div>
    </div>
  </div>
</body>

</html>
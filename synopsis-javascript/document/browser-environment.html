<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Браузерное окружение, спецификации</title>
	
	<link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="../css/fonts.css">
</head>
<body>
	<div class="page-wrapper">
		<div class="page">
			<h1 class="page__title">Браузерное окружение, спецификации</h1>
			<p>Язык JavaScript изначально был создан для веб-браузеров. Но с тех пор он значительно эволюционировал и превратился в кроссплатформенный язык программирования для решения широкого круга задач.</p>
			<p>Сегодня JavaScript может использоваться в браузере, на веб-сервере или в какой-то другой среде, даже в кофеварке. Каждая среда предоставляет свой функционал, который спецификация JavaScript называет <em>окружением</em>.</p>
			<p>Окружение предоставляет свои объекты и дополнительные функции, в дополнение базовым языковым. Браузеры, например, дают средства для управления веб-страницами. Node.js делает доступными какие-то серверные возможности и так далее.</p>
			<p>На картинке ниже в общих чертах показано, что доступно для JavaScript в браузерном окружении:</p>
			<div class="image browser-environment">
				<div class="window">
					<span>window</span>
				</div>
				<div class="columns">
					<div class="dom">
						<span>DOM</span>
						<div class="document">
							<span>document</span>
						</div>
						<div class="points">
							<span><b>...</b></span>
						</div>
					</div>
					<div class="bom">
						<span>BOM</span>
						<div class="navigator">
							<span>navigator</span>
						</div>
						<div class="screen">
							<span>screen</span>
						</div>
						<div class="location">
							<span>location</span>
						</div>
						<div class="frames">
							<span>frames</span>
						</div>
						<div class="history">
							<span>history</span>
						</div>
						<div class="XMLHttpRequest">
							<span>XMLHttpRequest</span>
						</div>
					</div>
					<div class="javascript">
						<span>JavaScript</span>
						<div class="object">
							<span>Object</span>
						</div>
						<div class="array">
							<span>Array</span>
						</div>
						<div class="func">
							<span>Function</span>
						</div>
						<div class="points">
							<span><b>...</b></span>
						</div>
					</div>
				</div>
				<span class="arrow down">↓</span>
				<span class="arrow left">⟵</span>
				<span class="arrow right">⟶</span>
			</div>
			<p>Как видно из картинки выше, имеется корневой объект <code>window</code>, который выступает в 2 ролях:</p>
			<ol>
				<li>Во-первых, это глобальный объект для JavaScript-кода.</li>
				<li>Во-вторых, он также представляет собой окно браузера и располагает методами для управления им.</li>
			</ol>
			<p>Например, здесь используется <code>window</code> как глобальный объект:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class=" language-javascript">
							<code class="token keyword">function</code>
							<code class="token function">sayHi</code><code class="token punctuation">(</code><code class="token punctuation">)</code>
							<code class="token punctuation">{</code><br>
							<code class="token function rows-indentation">alert</code><code class="token punctuation">(</code><code class="token string">"Hello"</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token punctuation">}</code><br><br>
							<code class="token comment">// глобальные функции доступны как методы глобального объекта:</code><br>
							window<code class="token punctuation">.</code><code class="token function">sayHi</code><code class="token punctuation">(</code><code class="token punctuation">)</code><code class="token punctuation">;</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span><br>
							<span>4</span><br>
							<span>5</span><br>
							<span>6</span>
						</span>
					</div>
				</div>
			</div>
			<p>А здесь используется <code>window</code> как объект окна браузера, чтобы узнать его высоту:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class=" language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>window<code class="token punctuation">.</code>innerHeight<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// внутренняя высота окна браузера</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span>
						</span>
					</div>
				</div>
			</div>
			<h2>DOM (Document Object Model)</h2>
			<p>Document Object Model, сокращённо DOM – объектная модель документа, которая представляет все содержимое страницы в виде объектов, которые можно менять.</p>
			<p>Объект <code>document</code> – основная «входная точка». С его помощью можно что-то создавать или менять на странице:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class=" language-javascript">
							<code class="token comment">// заменим цвет фона на красный,</code><br>
							document<code class="token punctuation">.</code>body<code class="token punctuation">.</code>style<code class="token punctuation">.</code>background <code class="token operator">=</code>
							<code class="token string">"red"</code><code class="token punctuation">;</code><br><br>
							<code class="token comment">// а через секунду вернём как было</code><br>
							<code class="token function">setTimeout</code><code class="token punctuation">(</code><code class="token punctuation">(</code><code class="token punctuation">)</code>
							<code class="token operator">=&gt;</code> document<code class="token punctuation">.</code>body<code class="token punctuation">.</code>style<code class="token punctuation">.</code>background <code class="token operator">=</code>
							<code class="token string">""</code><code class="token punctuation">,</code>
							<code class="token number">1000</code><code class="token punctuation">)</code><code class="token punctuation">;</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span><br>
							<span>4</span><br>
							<span>5</span>
						</span>
					</div>
				</div>
			</div>
			<p>В примере было использовано только <code>document.body.style</code>, но на самом деле возможности по управлению страницей намного шире. Различные свойства и методы описаны в спецификации:</p>
			<ul>
				<li><strong>DOM Living Standard</strong> на <a href="https://dom.spec.whatwg.org">https://dom.spec.whatwg.org</a></li>
			</ul>
			<div class="important important_smart">
				<div class="important__header">
					<span class="important__type">DOM – не только для браузеров</span>
				</div>
				<div class="important__content">
					<p>Спецификация DOM описывает структуру документа и предоставляет объекты для манипуляций со страницей. Существует и другие, отличные от браузеров, инструменты, использующие DOM.</p>
					<p>Например, серверные скрипты, которые загружают и обрабатывают HTML-страницы, также могут использовать DOM. При этом они могут поддерживать спецификацию не полностью.</p>
				</div>
			</div>
			<div class="important important_smart">
				<div class="important__header">
					<span class="important__type">CSSOM для стилей</span>
				</div>
				<div class="important__content">
					<p>Правила стилей CSS структурированы иначе чем HTML. Для них есть отдельная спецификация <a href="https://www.w3.org/TR/cssom-1/">CSSOM</a>, которая объясняет, как стили должны представляться в виде объектов, как их читать и писать.</p>
					<p>CSSOM используется вместе с DOM при изменении стилей документа. В реальности CSSOM требуется редко, обычно правила CSS статичны. Мы редко добавляем/удаляем стили из JavaScript, но и это возможно.</p>
				</div>
			</div>
			<h2>BOM (Browser Object Model)</h2>
			<p>Объектная модель браузера (Browser Object Model, BOM) – это дополнительные объекты, предоставляемые браузером (окружением), чтобы работать со всем, кроме документа:</p>
			<ul>
				<li>Объект <a href="https://developer.mozilla.org/ru/docs/Web/API/Window/navigator">navigator</a> даёт информацию о самом браузере и операционной системе. Среди множества его свойств самыми известными являются: <code>navigator.userAgent</code> – информация о текущем браузере, и <code>navigator.platform</code> – информация о платформе (может помочь в понимании того, в какой ОС открыт браузер – Windows/Linux/Mac и так далее).</li>
				<li>Объект <a href="https://developer.mozilla.org/ru/docs/Web/API/Window/location">location</a> позволяет получить текущий URL и перенаправить браузер по новому адресу.</li>
			</ul>
			<p>Вот как можно использовать объект <code>location</code>:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class=" language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>location<code class="token punctuation">.</code>href<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// показывает текущий URL</code><br>
							<code class="token keyword">if</code>
							<code class="token punctuation">(</code><code class="token function">confirm</code><code class="token punctuation">(</code><code class="token string">"Перейти на Wikipedia?"</code><code class="token punctuation">)</code><code class="token punctuation">)</code>
							<code class="token punctuation">{</code><br>
							<span class="rows-indentation">location</span><code class="token punctuation">.</code>href <code class="token operator">=</code>
							<code class="token string">"https://wikipedia.org"</code><code class="token punctuation">;</code>
							<code class="token comment">// перенаправляет браузер на другой URL</code><br>
							<code class="token punctuation">}</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span><br>
							<span>4</span>
						</span>
					</div>
				</div>
			</div>
			<p>Функции <code>alert/confirm/prompt</code> тоже являются частью BOM: они не относятся непосредственно к странице, но представляют собой методы объекта окна браузера для коммуникации с пользователем.</p>
			<div class="important important_smart">
				<div class="important__header">
					<span class="important__type">Спецификации</span>
				</div>
				<div class="important__content">
					<p>BOM является частью общей <a href="https://html.spec.whatwg.org">спецификации HTML</a>.</p>
					<p>Спецификация HTML по адресу <a href="https://html.spec.whatwg.org">https://html.spec.whatwg.org</a> не только про «язык HTML» (теги, атрибуты), она также покрывает целое множество объектов, методов и специфичных для каждого браузера расширений DOM. Это всё «HTML в широком смысле». Для некоторых вещей есть отдельные спецификации, перечисленные на <a href="https://spec.whatwg.org">https://spec.whatwg.org</a>.</p>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
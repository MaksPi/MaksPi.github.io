<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial=scale=1.0">

	<title>Конструкция "switch"</title>
	
	<link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="../css/fonts.css">
</head>

<body>
	<div class="page-wrapper">
		<div class="page">
			<h1 class="page__title">Конструкция "switch"</h1>
			<p>Конструкция <code>switch</code> заменяет собой сразу несколько <code>if</code>.</p>
			<p>Она представляет собой более наглядный способ сравнить выражение сразу с несколькими вариантами.</p>
			<h2>Синтаксис</h2>
			<p>Конструкция <code>switch</code> имеет один или более блок <code>case</code> и необязательный блок <code>default</code>.</p>
			<p>Выглядит она так:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers language-javascript">
						<code class="language-javascript">
							<code class="token keyword">switch</code><code class="token punctuation">(</code>x<code class="token punctuation">)</code> <code class="token punctuation">{</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token string">'value1'</code><code class="token punctuation">:</code>  <code class="token comment">// if (x === 'value1')</code><br>
							<code class="token operator rows-double-indentation"><code class="token rows-double-indentation">...</code></code><br>
							<code class="token punctuation rows-double-indentation"><code class="token rows-double-indentation">[</code></code><code class="token keyword">break</code><code class="token punctuation">]</code><br><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token string">'value2'</code><code class="token punctuation">:</code>  <code class="token comment">// if (x === 'value2')</code><br>
							<code class="token operator rows-double-indentation"><code class="token rows-double-indentation">...</code></code><br>
							<code class="token punctuation rows-double-indentation"><code class="token rows-double-indentation">[</code></code><code class="token keyword">break</code><code class="token punctuation">]</code><br><br>
							<code class="token keyword rows-double-indentation">default</code><code class="token punctuation">:</code><br>
							<code class="token operator rows-double-indentation"><code class="token rows-double-indentation">...</code></code><br>
							<code class="token punctuation rows-double-indentation"><code class="token rows-double-indentation">[</code></code><code class="token keyword">break</code><code class="token punctuation">]</code><br>
							<code class="token punctuation">}</code>
						</code>
						<span class="line-numbers-rows">
							<script src="../js/line-numbers-rows.js"></script>
							<script>rowsNumbers(13);</script>
						</span>
					</div>
				</div>
			</div>
			<ul>
				<li>Переменная <code>x</code> проверяется на строгое равенство первому значению <code>value1</code>, затем второму <code>value2</code> и так далее.</li>
				<li>Если соответствие установлено – <code>switch</code> начинает выполняться от соответствующей директивы <code>case</code> и далее, до ближайшего <code>break</code> (или до конца <code>switch</code>).</li>
				<li>Если ни один <code>case</code> не совпал – выполняется (если есть) вариант <code>default</code>.</li>
			</ul>
			<h2>Пример работы</h2>
			<p>Пример использования <code>switch</code> (сработавший код выделен):</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers language-javascript">
						<code class="language-javascript">
							<code class="token keyword">let</code> a <code class="token operator">=</code> <code class="token number">2</code> <code class="token operator">+</code> <code class="token number">2</code><code class="token punctuation">;</code><br><br>
							<code class="token keyword">switch</code> <code class="token punctuation">(</code>a<code class="token punctuation">)</code> <code class="token punctuation">{</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">3</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Маловато'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">4</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'В точку!'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">5</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Перебор'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">default</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">"Нет таких значений"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token punctuation">}</code>
						</code>
						<span class="line-numbers-rows">
							<script src="../js/line-numbers-rows.js"></script>
							<script>rowsNumbers(15);</script>
						</span>
					</div>
				</div>
			</div>
			<p>Здесь оператор <code>switch</code> последовательно сравнит <code>a</code> со всеми вариантами из <code>case</code>.</p>
			<p>Сначала <code>3</code>, затем – так как нет совпадения – <code>4</code>. Совпадение найдено, будет выполнен этот вариант, со строки <code>alert( 'В точку!' )</code> и далее, до ближайшего <code>break</code>, который прервёт выполнение.</p>
			<p><strong>Если <code>break</code> нет, то выполнение пойдёт ниже по следующим <code>case</code>, при этом остальные проверки игнорируются.</strong></p>
			<p>Пример без <code>break</code>:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers language-javascript">
						<code class="language-javascript">
							<code class="token keyword">let</code> a <code class="token operator">=</code> <code class="token number">2</code> <code class="token operator">+</code> <code class="token number">2</code><code class="token punctuation">;</code><br><br>
							<code class="token keyword">switch</code> <code class="token punctuation">(</code>a<code class="token punctuation">)</code> <code class="token punctuation">{</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">3</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Маловато'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">4</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'В точку!'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">5</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Перебор'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">default</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">"Нет таких значений"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token punctuation">}</code>
						</code>
						<span class="line-numbers-rows">
							<script src="../js/line-numbers-rows.js"></script>
							<script>rowsNumbers(12);</script>
						</span>
					</div>
				</div>
			</div>
			<p>В примере выше последовательно выполнятся три <code>alert</code>:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'В точку!'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Перебор'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Нет таких значений"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
						</code>
						<span class="line-numbers-rows">
							<script src="../js/line-numbers-rows.js"></script>
							<script>rowsNumbers(3);</script>
						</span>
					</div>
				</div>
			</div>
			<div class="important important_smart">
				<div class="important__header"><span class="important__type">Любое выражение может быть аргументом для <code>switch/case</code></span></div>
				<div class="important__content"><p>И <code>switch</code> и <code>case</code> допускают любое выражение в качестве аргумента.</p>
					<p>Например:</p>
					<div class="code-example">
						<div class="codebox">
							<div class="line-numbers language-javascript">
								<code class="language-javascript">
									<code class="token keyword">let</code> a <code class="token operator">=</code> <code class="token string">"1"</code><code class="token punctuation">;</code><br>
									<code class="token keyword">let</code> b <code class="token operator">=</code> <code class="token number">0</code><code class="token punctuation">;</code><br><br>
									<code class="token keyword">switch</code> <code class="token punctuation">(</code><code class="token operator">+</code>a<code class="token punctuation">)</code> <code class="token punctuation">{</code><br>
									<code class="token keyword rows-double-indentation">case</code> b <code class="token operator">+</code> <code class="token number">1</code><code class="token punctuation">:</code><br>
									<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code><code class="token string">"Выполнится, т.к. значением +a будет 1, что в точности равно b+1"</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
									<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br><br>
									<code class="token keyword rows-double-indentation">default</code><code class="token punctuation">:</code><br>
									<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code><code class="token string">"Это не выполнится"</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
									<code class="token punctuation">}</code>
								</code>
								<span class="line-numbers-rows">
									<script src="../js/line-numbers-rows.js"></script>
									<script>rowsNumbers(11);</script>
								</span>
							</div>
						</div>
					</div>
					<p>В этом примере выражение <code>+a</code> вычисляется в <code>1</code>, что совпадает с выражением <code>b + 1</code> в <code>case</code>, и следовательно, код в этом блоке будет выполнен.</p>
				</div>
			</div>
			<h2>Группировка «case»</h2>
			<p>Несколько вариантов <code>case</code>, использующих один код, можно группировать.</p>
			<p>Ниже пример, в котором выполняется один и тот же код для <code>case 3</code> и <code>case 5</code>, сгруппировав их:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers language-javascript">
						<code class="language-javascript">
							<code class="token keyword">let</code> a <code class="token operator">=</code> <code class="token number">2</code> <code class="token operator">+</code> <code class="token number">2</code><code class="token punctuation">;</code><br><br>
							<code class="token keyword">switch</code> <code class="token punctuation">(</code>a<code class="token punctuation">)</code> <code class="token punctuation">{</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">4</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code><code class="token string">'Правильно!'</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">3</code><code class="token punctuation">:</code> <code class="token comment">// (*) группируем оба case</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">5</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code><code class="token string">'Неправильно!'</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code><code class="token string">"Может вам посетить урок математики?"</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br><br>
							<code class="token keyword rows-double-indentation">default</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code><code class="token string">'Результат выглядит странновато. Честно.'</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token punctuation">}</code>
						</code>
						<span class="line-numbers-rows">
							<script src="../js/line-numbers-rows.js"></script>
							<script>rowsNumbers(16);</script>
						</span>
					</div>
				</div>
			</div>
			<p>Теперь оба варианта <code>3</code> и <code>5</code> выводят одно сообщение.</p>
			<p>Возможность группировать <code>case</code> – это побочный эффект того, как <code>switch/case</code> работает без <code>break</code>. Здесь выполнение <code>case 3</code> начинается со строки <code>(*)</code> и продолжается в <code>case 5</code>, потому что отсутствует <code>break</code>.</p>
			<h2>Тип имеет значение</h2>
			<p>Нужно отметить, что проверка на равенство всегда строгая. Значения должны быть одного типа, чтобы выполнялось равенство.</p>
			<p>Для примера, следует рассмотреть следующий код:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers language-javascript">
						<code class="language-javascript">
							<code class="token keyword">let</code> arg <code class="token operator">=</code> <code class="token function">prompt</code><code class="token punctuation">(</code><code class="token string">"Введите число?"</code><code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword">switch</code> <code class="token punctuation">(</code>arg<code class="token punctuation">)</code> <code class="token punctuation">{</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token string">'0'</code><code class="token punctuation">:</code><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token string">'1'</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Один или ноль'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token string">'2'</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Два'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br><br>
							<code class="token keyword rows-double-indentation">case</code> <code class="token number">3</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Никогда не выполнится!'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation"><code class="token rows-double-indentation">break</code></code><code class="token punctuation">;</code><br>
							<code class="token keyword rows-double-indentation">default</code><code class="token punctuation">:</code><br>
							<code class="token function rows-double-indentation"><code class="token rows-double-indentation">alert</code></code><code class="token punctuation">(</code> <code class="token string">'Неизвестное значение'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code><br>
							<code class="token punctuation">}</code>
						</code>
						<span class="line-numbers-rows">
							<script src="../js/line-numbers-rows.js"></script>
							<script>rowsNumbers(17);</script>
						</span>
					</div>
				</div>
			</div>
			<ol>
				<li>Для <code>'0'</code> и <code>'1'</code> выполнится первый <code>alert</code>.</li>
				<li>Для <code>'2'</code> – второй <code>alert</code>.</li>
				<li>Но для <code>3</code>, результат выполнения <code>prompt</code> будет строка <code>"3"</code>, которая не соответствует строгому равенству <code>===</code> с числом <code>3</code>. Таким образом, мы имеем «мёртвый код» в <code>case 3</code>! Выполнится вариант <code>default</code>.</li>
			</ol>
		</div>
	</div>
</body>

</html>
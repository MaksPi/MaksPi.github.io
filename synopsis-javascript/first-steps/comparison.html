<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">

	<title>Операторы сравнения</title>
	
	<link rel="stylesheet" href="../css/style.css">
	<link rel="stylesheet" href="../css/fonts.css">
</head>

<body>
	<div class="page-wrapper">
		<div class="page">
			<h1 class="page__title">Операторы сравнения</h1>
			<p>Многие операторы сравнения известны из математики:</p>
			<ul>
				<li>Больше/меньше: <code>a &gt; b</code>, <code>a &lt; b</code>.</li>
				<li>Больше/меньше или равно: <code>a &gt;= b</code>, <code>a &lt;= b</code>.</li>
				<li>Равно: <code>a == b</code> - для сравнения используется двойной знак равенства <code>=</code>. Один знак равенства <code>a = b</code> означал бы присваивание.</li>
				<li>Не равно. В математике обозначается символом <code>≠</code>. В JavaScript записывается как знак равенства с предшествующим ему восклицательным знаком: <code>a != b</code>.</li>
			</ul>
			<h2>Результат сравнения имеет логический тип</h2>
			<p>Операторы сравнения, как и другие операторы, возвращают значение. Это значение имеет логический тип.</p>
			<ul>
				<li><code>true</code> – означает «да», «верно», «истина».</li>
				<li><code>false</code> – означает «нет», «неверно», «ложь».</li>
			</ul>
			<p>Например:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token number">2</code>
							<code class="token operator">&gt;</code>
							<code class="token number">1</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>  <code class="token comment">// true (верно)</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token number">2</code>
							<code class="token operator">==</code>
							<code class="token number">1</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// false (неверно)</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token number">2</code>
							<code class="token operator">!=</code>
							<code class="token number">1</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true (верно)</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span>
						</span>
					</div>
				</div>
			</div>
			<p>Результат сравнения можно присвоить переменной, как и любое значение:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token keyword">let</code>
							result
							<code class="token operator">=</code>
							<code class="token number">5</code>
							<code class="token operator">&gt;</code>
							<code class="token number">4</code><code class="token punctuation">;</code>
							<code class="token comment">// результат сравнения присваивается переменной result</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code> result <code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span>
						</span>
					</div>
				</div>
			</div>
			<h2>Сравнение строк</h2>
			<p>Чтобы определить, что одна строка больше другой, JavaScript использует «алфавитный» или «лексикографический» порядок.</p>
			<p>Другими словами, строки сравниваются посимвольно:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token string">'Я'</code>
							<code class="token operator">&gt;</code>
							<code class="token string">'А'</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token string">'Кот'</code>
							<code class="token operator">&gt;</code>
							<code class="token string">'Код'</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token string">'Сонный'</code>
							<code class="token operator">&gt;</code>
							<code class="token string">'Сон'</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span>
						</span>
					</div>
				</div>
			</div>
			<p>Алгоритм сравнения двух строк довольно прост:</p>
			<ol>
				<li>Сначала сравниваются первые символы строк.</li>
				<li>Если первый символ первой строки больше (меньше), чем первый символ второй, то первая строка больше (меньше) второй.</li>
				<li>Если первые символы равны, то таким же образом сравниваются уже вторые символы строк.</li>
				<li>Сравнение продолжается, пока не закончится одна из строк.</li>
				<li>Если обе строки заканчиваются одновременно, то они равны. Иначе, большей считается более длинная строка.</li>
			</ol>
			<p>В примерах выше сравнение <code>'Я' &gt; 'А'</code> завершится на первом шаге, тогда как строки <code>"Кот"</code> и <code>"Код"</code> будут сравниваться посимвольно:</p>
			<ol>
				<li><code>К</code> равна <code>К</code>.</li>
				<li><code>о</code> равна <code>о</code>.</li>
				<li><code>т</code> больше чем <code>д</code>. На этом сравнение заканчивается. Первая строка больше.</li>
			</ol>
			<div class="important important_smart">
				<div class="important__header"><span class="important__type">Используется кодировка Unicode, а не настоящий алфавит</span></div>
				<div class="important__content"><p>Приведённый выше алгоритм сравнения похож на алгоритм, используемый в словарях и телефонных книгах, но между ними есть и различия.</p>
					<p>Например, в JavaScript имеет значение регистр символов. Заглавная буква <code>"A"</code> не равна строчной <code>"a"</code>. Какая же из них больше? Строчная <code>"a"</code>. Почему? Потому что строчные буквы имеют больший код во внутренней таблице кодирования, которую использует JavaScript (Unicode).</p>
				</div>
			</div>
			<h2>Сравнение разных типов</h2>
			<p>При сравнении значений разных типов JavaScript приводит каждое из них к числу:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token string">'2'</code>
							<code class="token operator">&gt;</code>
							<code class="token number">1</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true, строка '2' становится числом 2</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token string">'01'</code>
							<code class="token operator">==</code>
							<code class="token number">1</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true, строка '01' становится числом 1</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span>
						</span>
					</div>
				</div>
			</div>
			<p>Логическое значение <code>true</code> становится <code>1</code>, а <code>false</code> – <code>0</code>:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token boolean">true</code>
							<code class="token operator">==</code>
							<code class="token number">1</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token boolean">false</code>
							<code class="token operator">==</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span>
						</span>
					</div>
				</div>
			</div>
			<div class="important important_smart">
				<div class="important__header"><span class="important__type">Забавное следствие</span></div>
				<div class="important__content"><p>Возможна следующая ситуация:</p>
					<ul>
						<li>Два значения равны.</li>
						<li>Одно из них <code>true</code> как логическое значение, другое – <code>false</code>.</li>
					</ul>
					<p>Например:</p>
					<div class="code-example">
						<div class="codebox">
							<div class="line-numbers  language-javascript">
								<code class="language-javascript">
									<code class="token keyword">let</code> a <code class="token operator">=</code>
									<code class="token number">0</code><code class="token punctuation">;</code><br>
									<code class="token function">alert</code><code class="token punctuation">(</code>
									<code class="token function">Boolean</code><code class="token punctuation">(</code>a<code class="token punctuation">)</code>
									<code class="token punctuation">)</code><code class="token punctuation">;</code>
									<code class="token comment">// false</code><br><br>
									<code class="token keyword">let</code> b <code class="token operator">=</code>
									<code class="token string">"0"</code><code class="token punctuation">;</code><br>
									<code class="token function">alert</code><code class="token punctuation">(</code>
									<code class="token function">Boolean</code><code class="token punctuation">(</code>b<code class="token punctuation">)</code>
									<code class="token punctuation">)</code><code class="token punctuation">;</code>
									<code class="token comment">// true</code><br><br>
									<code class="token function">alert</code><code class="token punctuation">(</code>a <code class="token operator">==</code> b<code class="token punctuation">)</code><code class="token punctuation">;</code>
									<code class="token comment">// true!</code>
								</code>
								<span class="line-numbers-rows">
									<span>1</span><br>
									<span>2</span><br>
									<span>3</span><br>
									<span>4</span><br>
									<span>5</span><br>
									<span>6</span><br>
									<span>7</span>
								</span>
							</div>
						</div>
					</div>
					<p>С точки зрения JavaScript, результат ожидаем. Равенство преобразует значения, используя числовое преобразование, поэтому <code>"0"</code> становится <code>0</code>. В то время как явное преобразование с помощью <code>Boolean</code> использует другой набор правил.</p>
				</div>
			</div>
			<h2>Строгое сравнение</h2>
			<p>Использование обычного сравнения <code>==</code> может вызывать проблемы. Например, оно не отличает <code>0</code> от <code>false</code>:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token number">0</code>
							<code class="token operator">==</code>
							<code class="token boolean">false</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span>
						</span>
					</div>
				</div>
			</div>
			<p>Та же проблема с пустой строкой:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token string">''</code>
							<code class="token operator">==</code>
							<code class="token boolean">false</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// true</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span>
						</span>
					</div>
				</div>
			</div>
			<p>Это происходит из-за того, что операнды разных типов преобразуются оператором <code>==</code> к числу. В итоге, и пустая строка, и <code>false</code> становятся нулём.</p>
			<p><strong>Оператор строгого равенства <code>===</code> проверяет равенство без приведения типов.</strong></p>
			<p>Другими словами, если <code>a</code> и <code>b</code> имеют разные типы, то проверка <code>a === b</code> немедленно возвращает <code>false</code> без попытки их преобразования:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token number">0</code>
							<code class="token operator">===</code>
							<code class="token boolean">false</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// false, так как сравниваются разные типы</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span>
						</span>
					</div>
				</div>
			</div>
			<p>Ещё есть оператор строгого неравенства <code>!==</code>, аналогичный <code>!=</code>.</p>
			<p>Оператор строгого равенства дольше писать, но он делает код более очевидным и оставляет меньше мест для ошибок.</p>
			<h2>Сравнение с null и undefined</h2>
			<p>Поведение <code>null</code> и <code>undefined</code> при сравнении с другими значениями – особое:</p>
			<dl>
				<dt>При строгом равенстве <code>===</code></dt>
				<dd>
					<p>Эти значения различны, так как различны их типы.</p>
					<div class="code-example">
						<div class="codebox">
							<div class="line-numbers  language-javascript">
								<code class="language-javascript">
									<code class="token function">alert</code><code class="token punctuation">(</code>
									<code class="token keyword">null</code>
									<code class="token operator">===</code>
									<code class="token keyword">undefined</code>
									<code class="token punctuation">)</code><code class="token punctuation">;</code>
									<code class="token comment">// false</code>
								</code>
								<span class="line-numbers-rows">
									<span>1</span>
								</span>
							</div>
						</div>
					</div>
				</dd>
				<dt>При нестрогом равенстве <code>==</code></dt>
				<dd>
					<p>Эти значения равны друг другу и не равны никаким другим значениям. Это специальное правило языка.</p>
					<div class="code-example">
						<div class="codebox">
							<div class="line-numbers  language-javascript">
								<code class="language-javascript">
									<code class="token function">alert</code><code class="token punctuation">(</code>
									<code class="token keyword">null</code>
									<code class="token operator">==</code>
									<code class="token keyword">undefined</code>
									<code class="token punctuation">)</code><code class="token punctuation">;</code>
									<code class="token comment">// true</code>
								</code>
								<span class="line-numbers-rows">
									<span>1</span>
								</span>
							</div>
						</div>
					</div>
				</dd>
				<dt>При использовании математических операторов и других операторов сравнения <code>&lt; &gt; &lt;= &gt;=</code></dt>
				<dd>
					<p>Значения <code>null/undefined</code> преобразуются к числам: <code>null</code> становится <code>0</code>, а <code>undefined</code> – <code>NaN</code>.</p>
				</dd>
			</dl>
			<p>Ниже приведены забавные вещи, которые случаются при применении этих правил. И, что более важно - то, как избежать ошибок при их использовании.</p>
			<h3>Странный результат сравнения null и 0</h3>
			<p>Сравнение <code>null</code> с нулём:</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token keyword">null</code>
							<code class="token operator">&gt;</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>  <code class="token comment">// (1) false</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token keyword">null</code>
							<code class="token operator">==</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// (2) false</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token keyword">null</code>
							<code class="token operator">&gt;=</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// (3) true</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span>
						</span>
					</div>
				</div>
			</div>
			<p>С точки зрения математики это странно. Результат последнего сравнения говорит о том, что "<code>null</code> больше или равно нулю", тогда результат одного из сравнений выше должен быть <code>true</code>, но они оба ложны.</p>
			<p>Причина в том, что нестрогое равенство и сравнения <code>&gt; &lt; &gt;= &lt;=</code> работают по-разному. Сравнения преобразуют <code>null</code> в число, рассматривая его как <code>0</code>. Поэтому выражение (3) <code>null &gt;= 0</code> истинно, а <code>null &gt; 0</code> ложно.</p>
			<p>С другой стороны, для нестрогого равенства <code>==</code> значений <code>undefined</code> и <code>null</code> действует особое правило: эти значения ни к чему не приводятся, они равны друг другу и не равны ничему другому. Поэтому (2) <code>null == 0</code> ложно.</p>
			<h3>Несравнимое значение undefined</h3>
			<p>Значение <code>undefined</code> несравнимо с другими значениями (кроме null - при нестрогом равенстве <code>==</code>):</p>
			<div class="code-example">
				<div class="codebox">
					<div class="line-numbers  language-javascript">
						<code class="language-javascript">
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token keyword">undefined</code>
							<code class="token operator">&gt;</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// false (1)</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token keyword">undefined</code>
							<code class="token operator">&lt;</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// false (2)</code><br>
							<code class="token function">alert</code><code class="token punctuation">(</code>
							<code class="token keyword">undefined</code>
							<code class="token operator">==</code>
							<code class="token number">0</code>
							<code class="token punctuation">)</code><code class="token punctuation">;</code>
							<code class="token comment">// false (3)</code>
						</code>
						<span class="line-numbers-rows">
							<span>1</span><br>
							<span>2</span><br>
							<span>3</span>
						</span>
					</div>
				</div>
			</div>
			<p>На вопрос почему сравнение <code>undefined</code> с нулём всегда ложно, есть следующие причины:</p>
			<ul>
				<li>Сравнения <code>(1)</code> и <code>(2)</code> возвращают <code>false</code>, потому что <code>undefined</code> преобразуется в <code>NaN</code>, а <code>NaN</code> – это специальное числовое значение, которое возвращает <code>false</code> при любых сравнениях.</li>
				<li>Нестрогое равенство <code>(3)</code> возвращает <code>false</code>, потому что <code>undefined</code> равно только <code>null</code> и ничему больше.</li>
			</ul>
		</div>
	</div>
</body>

</html>
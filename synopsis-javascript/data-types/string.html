<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial=scale=1.0">

  <title>Строки</title>
  
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/fonts.css">
  <link rel="shortcut icon" href="../img/iconfinder_graduation_cap.png">
</head>

<body>
  <div class="page-wrapper">
    <div class="page">
      <div class="main__header">
        <div class="main__header-group">
          <ol class="breadcrumbs">
            <li class="breadcrumbs__item breadcrumbs__item_home">
              <a class="breadcrumbs__link" title="Оглавление" href="../index.html"></a>
            </li>
            <li class="breadcrumbs__item"></li>
          </ol>
          <div class="updated-at">
            <div class="updated-at__content">14-го августа 2020</div>
          </div>
        </div>
        <h1 class="page__title">Строки</h1>
      </div>
      <div itemprop="articleBody">
        <p>В JavaScript любые текстовые данные являются строками. Не существует отдельного типа «символ», который есть в ряде других языков.</p>
        <p>Внутренний формат для строк — всегда <a href="https://ru.wikipedia.org/wiki/UTF-16">UTF-16</a>, вне зависимости от кодировки страницы.</p>
        <h2>Кавычки</h2>
        <p>В JavaScript есть разные типы кавычек.</p>
        <p>Строку можно создать с помощью одинарных, двойных либо обратных кавычек:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> single <code class="token operator">=</code> <code class="token string">'single-quoted'</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> double <code class="token operator">=</code> <code class="token string">"double-quoted"</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> backticks <code class="token operator">=</code> <code class="token template-string"><code class="token string">`backticks`</code></code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Одинарные и двойные кавычки работают, по сути, одинаково, а если использовать обратные кавычки, то в такую строку мы сможем вставлять произвольные выражения, обернув их в <code>${…}</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">function</code> <code class="token function">sum</code><code class="token punctuation">(</code><code class="token parameter">a<code class="token punctuation">,</code> b</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token keyword">return</code> a <code class="token operator">+</code> b<code class="token punctuation">;</code>
<code class="token punctuation">}</code>

<code class="token function">alert</code><code class="token punctuation">(</code><code class="token template-string"><code class="token string">`1 + 2 = </code><code class="token interpolation"><code class="token interpolation-punctuation punctuation">${</code><code class="token function">sum</code><code class="token punctuation">(</code><code class="token number">1</code><code class="token punctuation">,</code> <code class="token number">2</code><code class="token punctuation">)</code><code class="token interpolation-punctuation punctuation">}</code></code><code class="token string">.`</code></code><code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 1 + 2 = 3.</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Ещё одно преимущество обратных кавычек — они могут занимать более одной строки, вот так:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> guestList <code class="token operator">=</code><code class="token template-string"><code class="token string">`Guests:
  * John
  * Pete
  * Mary
`</code></code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code>guestList<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// список гостей, состоящий из нескольких строк</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Выглядит вполне естественно, не правда ли? Что тут такого? Но если попытаться использовать точно так же одинарные или двойные кавычки, то будет ошибка:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> guestList <code class="token operator">=</code> "Guests<code class="token punctuation">:</code> <code class="token comment">// Error: Unexpected token ILLEGAL</code>
  <code class="token operator">*</code> John"<code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Одинарные и двойные кавычки в языке с незапамятных времён: тогда потребность в многострочных строках не учитывалась. Что касается обратных кавычек, они появились существенно позже, и поэтому они гибче.</p>
        <p>Обратные кавычки также позволяют задавать «шаблонную функцию» перед первой обратной кавычкой. Используемый синтаксис: <code>func`string`</code>. Автоматически вызываемая функция <code>func</code> получает строку и встроенные в неё выражения и может их обработать. Подробнее об этом можно прочитать в <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates">документации</a>. Если перед строкой есть выражение, то шаблонная строка называется «теговым шаблоном». Это позволяет использовать свою шаблонизацию для строк, но на практике теговые шаблоны применяются редко.</p>
        <h2>Спецсимволы</h2>
        <p>Многострочные строки также можно создавать с помощью одинарных и двойных кавычек, используя так называемый «символ перевода строки», который записывается как <code>\n</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> guestList <code class="token operator">=</code> <code class="token string">"Guests:\n * John\n * Pete\n * Mary"</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code>guestList<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// список гостей, состоящий из нескольких строк</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>В частности, эти две строки эквивалентны, просто записаны по-разному:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token comment">// перевод строки добавлен с помощью символа перевода строки</code>
<code class="token keyword">let</code> str1 <code class="token operator">=</code> <code class="token string">"Hello\nWorld"</code><code class="token punctuation">;</code>

<code class="token comment">// многострочная строка, созданная с использованием обратных кавычек</code>
<code class="token keyword">let</code> str2 <code class="token operator">=</code> <code class="token template-string"><code class="token string">`Hello
World`</code></code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code>str1 <code class="token operator">==</code> str2<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(8);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Есть и другие, реже используемые спецсимволы. Вот список:</p>
        <table>
          <thead>
            <tr>
              <th>Символ</th>
              <th>Описание</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>\n</code></td>
              <td>Перевод строки</td>
            </tr>
            <tr>
              <td><code>\r</code></td>
              <td>Возврат каретки: самостоятельно не используется. В текстовых файлах Windows для перевода строки используется комбинация символов <code>\r\n</code>.</td>
            </tr>
            <tr>
              <td><code>\'</code>, <code>\"</code></td>
              <td>Кавычки</td>
            </tr>
            <tr>
              <td><code>\\</code></td>
              <td>Обратный слеш</td>
            </tr>
            <tr>
              <td><code>\t</code></td>
              <td>Знак табуляции</td>
            </tr>
            <tr>
              <td><code>\b</code>, <code>\f</code>, <code>\v</code></td>
              <td>Backspace, Form Feed и Vertical Tab — оставлены для обратной совместимости, сейчас не используются.</td>
            </tr>
            <tr>
              <td><code>\xXX</code></td>
              <td>Символ с шестнадцатеричным юникодным кодом <code>XX</code>, например, <code>'\x7A'</code> — то же самое, что <code>'z'</code>.</td>
            </tr>
            <tr>
              <td><code>\uXXXX</code></td>
              <td>Символ в кодировке UTF-16 с шестнадцатеричным кодом <code>XXXX</code>, например, <code>\u00A9</code> — юникодное представление знака копирайта, <code>©</code>. Код должен состоять ровно из 4 шестнадцатеричных цифр.</td>
            </tr>
            <tr>
              <td><code>\u{X…XXXXXX}</code> (от 1 до 6 шестнадцатеричных цифр)</td>
              <td>Символ в кодировке UTF-32 с шестнадцатеричным кодом от U+0000 до U+10FFFF. Некоторые редкие символы кодируются двумя 16-битными словами и занимают 4 байта. Так можно вставлять символы с длинным кодом.</td>
            </tr>
          </tbody>
        </table>
        <p>Примеры с Юникодом:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token comment">// ©</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"\u00A9"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token comment">// Длинные юникодные коды</code>
<code class="token comment">// 佫, редкий китайский иероглиф</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"\u{20331}"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token comment">// 😍, лицо с улыбкой и глазами в форме сердец</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"\u{1F60D}"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(8);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Все спецсимволы начинаются с обратного слеша, <code>\</code> — так называемого «символа экранирования».</p>
        <p>Он также используется, если необходимо вставить в строку кавычку.</p>
        <p>К примеру:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'I\'m the Walrus!'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// I'm the Walrus!</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Здесь перед входящей в строку кавычкой необходимо добавить обратный слеш —&nbsp;<code>\'</code> — иначе она бы обозначала окончание строки.</p>
        <p>Разумеется, требование экранировать относится только к таким же кавычкам, как те, в которые заключена строка. Так что мы можем применить и более элегантное решение, использовав для этой строки двойные или обратные кавычки:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token template-string"><code class="token string">`I'm the Walrus!`</code></code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// I'm the Walrus!</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Заметим, что обратный слеш <code>\</code> служит лишь для корректного прочтения строки интерпретатором, но он не записывается в строку после её прочтения. Когда строка сохраняется в оперативную память, в неё не добавляется символ <code>\</code>. Вы можете явно видеть это в выводах <code>alert</code> в примерах выше.</p>
        <p>Но что, если нам надо добавить в строку собственно сам обратный слеш <code>\</code>?</p>
        <p>Это можно сделать, добавив перед ним… ещё один обратный слеш!</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token template-string"><code class="token string">`The backslash: \\`</code></code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// The backslash: \</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <h2>Длина строки</h2>
        <p>Свойство <code>length</code> содержит длину строки:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token template-string"><code class="token string">`My\n`</code></code><code class="token punctuation">.</code>length <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 3</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Обратите внимание, <code>\n</code> — это один спецсимвол, поэтому тут всё правильно: длина строки <code>3</code>.</p>
        <div class="important important_warn">
          <div class="important__header"><span class="important__type"><code>length</code> — это свойство</span></div>
          <div class="important__content">
            <p>Бывает так, что люди с практикой в других языках случайно пытаются вызвать его, добавляя круглые скобки: они пишут <code>str.length()</code> вместо <code>str.length</code>. Это не работает.</p>
            <p>Так как <code>str.length</code> — это числовое свойство, а не функция, добавлять скобки не нужно.</p>
          </div>
        </div>
        <h2>Доступ к символам</h2>
        <p>Получить символ, который занимает позицию <code>pos</code>, можно с помощью квадратных скобок: <code>[pos]</code>. Также можно использовать метод <code>charAt</code>: <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/charAt">str.charAt(pos)</a>. Первый символ занимает нулевую позицию:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token template-string"><code class="token string">`Hello`</code></code><code class="token punctuation">;</code>

<code class="token comment">// получаем первый символ</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">[</code><code class="token number">0</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// H</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">charAt</code><code class="token punctuation">(</code><code class="token number">0</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// H</code>

<code class="token comment">// получаем последний символ</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">[</code>str<code class="token punctuation">.</code>length <code class="token operator">-</code> <code class="token number">1</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// o</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(8);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Квадратные скобки — современный способ получить символ, в то время как <code>charAt</code> существует в основном по историческим причинам.</p>
        <p>Разница только в том, что если символ с такой позицией отсутствует, тогда <code>[]</code> вернёт <code>undefined</code>, а <code>charAt</code> — пустую строку:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token template-string"><code class="token string">`Hello`</code></code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">[</code><code class="token number">1000</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// undefined</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">charAt</code><code class="token punctuation">(</code><code class="token number">1000</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// '' (пустая строка)</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Также можно перебрать строку посимвольно, используя <code>for..of</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> char <code class="token keyword">of</code> <code class="token string">"Hello"</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code>char<code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// H,e,l,l,o (char — сначала "H", потом "e", потом "l" и т. д.)</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <h2>Строки неизменяемы</h2>
        <p>Содержимое строки в JavaScript нельзя изменить. Нельзя взять символ посередине и заменить его. Как только строка создана — она такая навсегда.</p>
        <p>Давайте попробуем так сделать, и убедимся, что это не работает:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">'Hi'</code><code class="token punctuation">;</code>

str<code class="token punctuation">[</code><code class="token number">0</code><code class="token punctuation">]</code> <code class="token operator">=</code> <code class="token string">'h'</code><code class="token punctuation">;</code> <code class="token comment">// ошибка</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">[</code><code class="token number">0</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// не работает</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Можно создать новую строку и записать её в ту же самую переменную вместо старой.</p>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">'Hi'</code><code class="token punctuation">;</code>

str <code class="token operator">=</code> <code class="token string">'h'</code> <code class="token operator">+</code> str<code class="token punctuation">[</code><code class="token number">1</code><code class="token punctuation">]</code><code class="token punctuation">;</code> <code class="token comment">// заменяем строку</code>

<code class="token function">alert</code><code class="token punctuation">(</code> str <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// hi</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <p>В последующих разделах мы увидим больше примеров.</p>
        <h2>Изменение регистра</h2>
        <p>Методы <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase">toLowerCase()</a> и <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase">toUpperCase()</a> меняют регистр символов:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Interface'</code><code class="token punctuation">.</code><code class="token function">toUpperCase</code><code class="token punctuation">(</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// INTERFACE</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Interface'</code><code class="token punctuation">.</code><code class="token function">toLowerCase</code><code class="token punctuation">(</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// interface</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Если мы захотим перевести в нижний регистр какой-то конкретный символ:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Interface'</code><code class="token punctuation">[</code><code class="token number">0</code><code class="token punctuation">]</code><code class="token punctuation">.</code><code class="token function">toLowerCase</code><code class="token punctuation">(</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 'i'</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <h2>Поиск подстроки</h2>
        <p>Существует несколько способов поиска подстроки.</p>
        <h3>str.indexOf</h3>
        <p>Первый метод — <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf">str.indexOf(substr, pos)</a>.</p>
        <p>Он ищет подстроку <code>substr</code> в строке <code>str</code>, начиная с позиции <code>pos</code>, и возвращает позицию, на которой располагается совпадение, либо <code>-1</code> при отсутствии совпадений.</p>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">'Widget with id'</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">'Widget'</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 0, потому что подстрока 'Widget' найдена в начале</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">'widget'</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// -1, совпадений нет, поиск чувствителен к регистру</code>

<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">"id"</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 1, подстрока "id" найдена на позиции 1 (..idget with id)</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(6);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Необязательный второй аргумент позволяет начать поиск с определённой позиции.</p>
        <p>Например, первое вхождение <code>"id"</code> — на позиции <code>1</code>. Для того, чтобы найти следующее, начнём поиск с позиции <code>2</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">'Widget with id'</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">'id'</code><code class="token punctuation">,</code> <code class="token number">2</code><code class="token punctuation">)</code> <code class="token punctuation">)</code> <code class="token comment">// 12</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Чтобы найти все вхождения подстроки, нужно запустить <code>indexOf</code> в цикле. Каждый раз, получив очередную позицию, начинаем новый поиск со следующей:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">'Ослик Иа-Иа посмотрел на виадук'</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> target <code class="token operator">=</code> <code class="token string">'Иа'</code><code class="token punctuation">;</code> <code class="token comment">// цель поиска</code>

<code class="token keyword">let</code> pos <code class="token operator">=</code> <code class="token number">0</code><code class="token punctuation">;</code>
<code class="token keyword">while</code> <code class="token punctuation">(</code><code class="token boolean">true</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token keyword">let</code> foundPos <code class="token operator">=</code> str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code>target<code class="token punctuation">,</code> pos<code class="token punctuation">)</code><code class="token punctuation">;</code>
  <code class="token keyword">if</code> <code class="token punctuation">(</code>foundPos <code class="token operator">==</code> <code class="token operator">-</code><code class="token number">1</code><code class="token punctuation">)</code> <code class="token keyword">break</code><code class="token punctuation">;</code>

  <code class="token function">alert</code><code class="token punctuation">(</code> <code class="token template-string"><code class="token string">`Найдено тут: </code><code class="token interpolation"><code class="token interpolation-punctuation punctuation">${</code>foundPos<code class="token interpolation-punctuation punctuation">}</code></code><code class="token string">`</code></code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
  pos <code class="token operator">=</code> foundPos <code class="token operator">+</code> <code class="token number">1</code><code class="token punctuation">;</code> <code class="token comment">// продолжаем со следующей позиции</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(12);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Тот же алгоритм можно записать и короче:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"Ослик Иа-Иа посмотрел на виадук"</code><code class="token punctuation">;</code>
<code class="token keyword">let</code> target <code class="token operator">=</code> <code class="token string">"Иа"</code><code class="token punctuation">;</code>

<code class="token keyword">let</code> pos <code class="token operator">=</code> <code class="token operator">-</code><code class="token number">1</code><code class="token punctuation">;</code>
<code class="token keyword">while</code> <code class="token punctuation">(</code><code class="token punctuation">(</code>pos <code class="token operator">=</code> str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code>target<code class="token punctuation">,</code> pos <code class="token operator">+</code> <code class="token number">1</code><code class="token punctuation">)</code><code class="token punctuation">)</code> <code class="token operator">!=</code> <code class="token operator">-</code><code class="token number">1</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code> pos <code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(7);</script>
              </span>
            </div>
          </div>
        </div>
        <div class="important important_smart">
          <div class="important__header"><span class="important__type"><code>str.lastIndexOf(substr, position)</code></span></div>
          <div class="important__content">
            <p>Также есть похожий метод <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf">str.lastIndexOf(substr, position)</a>, который ищет с конца строки к её началу.</p>
            <p>Он используется тогда, когда нужно получить самое последнее вхождение: перед концом строки или начинающееся до (включительно) определённой позиции.</p>
          </div>
        </div>
        <p>При проверке <code>indexOf</code> в условии <code>if</code> есть небольшое неудобство. Такое условие не будет работать:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"Widget with id"</code><code class="token punctuation">;</code>

<code class="token keyword">if</code> <code class="token punctuation">(</code>str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">"Widget"</code><code class="token punctuation">)</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code><code class="token string">"Совпадение есть"</code><code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// не работает</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Мы ищем подстроку <code>"Widget"</code>, и она здесь есть, прямо на позиции <code>0</code>. Но <code>alert</code> не показывается, т. к. <code>str.indexOf("Widget")</code> возвращает <code>0</code>, и <code>if</code> решает, что тест не пройден.</p>
        <p>Поэтому надо делать проверку на <code>-1</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"Widget with id"</code><code class="token punctuation">;</code>

<code class="token keyword">if</code> <code class="token punctuation">(</code>str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">"Widget"</code><code class="token punctuation">)</code> <code class="token operator">!=</code> <code class="token operator">-</code><code class="token number">1</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code><code class="token string">"Совпадение есть"</code><code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// теперь работает</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <h4>Трюк с побитовым НЕ</h4>
        <p>Существует старый трюк с использованием <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#.7E_.28Bitwise_NOT.29">побитового оператора НЕ</a> — <code>~</code>. Он преобразует число в 32-разрядное целое со знаком (signed 32-bit integer). Дробная часть, в случае, если она присутствует, отбрасывается. Затем все биты числа инвертируются.</p>
        <p>На практике это означает простую вещь: для 32-разрядных целых чисел значение <code>~n</code> равно <code>-(n+1)</code>.</p>
        <p>В частности:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token operator">~</code><code class="token number">2</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// -3, то же, что -(2+1)</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token operator">~</code><code class="token number">1</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// -2, то же, что -(1+1)</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token operator">~</code><code class="token number">0</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// -1, то же, что -(0+1)</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token operator">~</code><code class="token operator">-</code><code class="token number">1</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 0, то же, что -(-1+1)</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Таким образом, <code>~n</code> равняется 0 только при <code>n == -1</code> (для любого <code>n</code>, входящего в 32-разрядные целые числа со знаком).</p>
        <p>Соответственно, прохождение проверки <code>if ( ~str.indexOf("…") )</code> означает, что результат <code>indexOf</code> отличен от <code>-1</code>, совпадение есть.</p>
        <p>Это иногда применяют, чтобы сделать проверку <code>indexOf</code> компактнее:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"Widget"</code><code class="token punctuation">;</code>

<code class="token keyword">if</code> <code class="token punctuation">(</code><code class="token operator">~</code>str<code class="token punctuation">.</code><code class="token function">indexOf</code><code class="token punctuation">(</code><code class="token string">"Widget"</code><code class="token punctuation">)</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  <code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Совпадение есть'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// работает</code>
<code class="token punctuation">}</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(5);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Обычно использовать возможности языка каким-либо неочевидным образом не рекомендуется, но этот трюк широко используется в старом коде, поэтому его важно понимать.</p>
        <p>Просто запомните: <code>if (~str.indexOf(…))</code> означает «если найдено».</p>
        <p>Впрочем, если быть точнее, из-за того, что большие числа обрезаются до 32 битов оператором <code>~</code>, существуют другие числа, для которых результат тоже будет <code>0</code>, самое маленькое из которых — <code>~4294967295=0</code>. Поэтому такая проверка будет правильно работать только для строк меньшей длины.</p>
        <p>На данный момент такой трюк можно встретить только в старом коде, потому что в новом он просто не нужен: есть метод <code>.includes</code> (см. ниже).</p>
        <h3>includes, startsWith, endsWith</h3>
        <p>Более современный метод <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/includes">str.includes(substr, pos)</a> возвращает <code>true</code>, если в строке <code>str</code> есть подстрока <code>substr</code>, либо <code>false</code>, если нет.</p>
        <p>Это — правильный выбор, если нам необходимо проверить, есть ли совпадение, но позиция не нужна:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Widget with id"</code><code class="token punctuation">.</code><code class="token function">includes</code><code class="token punctuation">(</code><code class="token string">"Widget"</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>

<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Hello"</code><code class="token punctuation">.</code><code class="token function">includes</code><code class="token punctuation">(</code><code class="token string">"Bye"</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// false</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Необязательный второй аргумент <code>str.includes</code> позволяет начать поиск с определённой позиции:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Midget"</code><code class="token punctuation">.</code><code class="token function">includes</code><code class="token punctuation">(</code><code class="token string">"id"</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Midget"</code><code class="token punctuation">.</code><code class="token function">includes</code><code class="token punctuation">(</code><code class="token string">"id"</code><code class="token punctuation">,</code> <code class="token number">3</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// false, поиск начат с позиции 3</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Методы <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith">str.startsWith</a> и <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith">str.endsWith</a> проверяют, соответственно, начинается ли и заканчивается ли строка определённой строкой:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Widget"</code><code class="token punctuation">.</code><code class="token function">startsWith</code><code class="token punctuation">(</code><code class="token string">"Wid"</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, "Wid" — начало "Widget"</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Widget"</code><code class="token punctuation">.</code><code class="token function">endsWith</code><code class="token punctuation">(</code><code class="token string">"get"</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true, "get" — окончание "Widget"</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <h2>Получение подстроки</h2>
        <p>В JavaScript есть 3 метода для получения подстроки: <code>substring</code>, <code>substr</code> и <code>slice</code>.</p>
        <dl>
          <dt><code>str.slice(start [, end])</code></dt>
          <dd>
            <p>Возвращает часть строки от <code>start</code> до (не включая) <code>end</code>.</p>
            <p>Например:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
<pre>
<code class="language-javascript">
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"stringify"</code><code class="token punctuation">;</code>
<code class="token comment">// 'strin', символы от 0 до 5 (не включая 5)</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">slice</code><code class="token punctuation">(</code><code class="token number">0</code><code class="token punctuation">,</code> <code class="token number">5</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token comment">// 's', от 0 до 1, не включая 1, т. е. только один символ на позиции 0</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">slice</code><code class="token punctuation">(</code><code class="token number">0</code><code class="token punctuation">,</code> <code class="token number">1</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
</code>
</pre>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(5);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>Если аргумент <code>end</code> отсутствует, <code>slice</code> возвращает символы до конца строки:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"stringify"</code><code class="token punctuation">;</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">slice</code><code class="token punctuation">(</code><code class="token number">2</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// ringify, с позиции 2 и до конца</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(2);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>Также для <code>start/end</code> можно задавать отрицательные значения. Это означает, что позиция определена как заданное количество символов <em>с конца строки</em>:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"stringify"</code><code class="token punctuation">;</code>

<code class="token comment">// начинаем с позиции 4 справа, а заканчиваем на позиции 1 справа</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">slice</code><code class="token punctuation">(</code><code class="token operator">-</code><code class="token number">4</code><code class="token punctuation">,</code> <code class="token operator">-</code><code class="token number">1</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// gif</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(4);</script>
                  </span>
                </div>
              </div>
            </div>
          </dd>
          <dt><code>str.substring(start [, end])</code></dt>
          <dd>
            <p>Возвращает часть строки <em>между</em> <code>start</code> и <code>end</code>.</p>
            <p>Это — почти то же, что и <code>slice</code>, но можно задавать <code>start</code> больше <code>end</code>.</p>
            <p>Например:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"stringify"</code><code class="token punctuation">;</code>

<code class="token comment">// для substring эти два примера — одинаковы</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">substring</code><code class="token punctuation">(</code><code class="token number">2</code><code class="token punctuation">,</code> <code class="token number">6</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "ring"</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">substring</code><code class="token punctuation">(</code><code class="token number">6</code><code class="token punctuation">,</code> <code class="token number">2</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "ring"</code>

<code class="token comment">// …но не для slice:</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">slice</code><code class="token punctuation">(</code><code class="token number">2</code><code class="token punctuation">,</code> <code class="token number">6</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "ring" (то же самое)</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">slice</code><code class="token punctuation">(</code><code class="token number">6</code><code class="token punctuation">,</code> <code class="token number">2</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// "" (пустая строка)</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(9);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>Отрицательные значения <code>substring</code>, в отличие от <code>slice</code>, не поддерживает, они интерпретируются как <code>0</code>.</p>
          </dd>
          <dt><code>str.substr(start [, length])</code></dt>
          <dd>
            <p>Возвращает часть строки от <code>start</code> длины <code>length</code>.</p>
            <p>В противоположность предыдущим методам, этот позволяет указать длину вместо конечной позиции:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"stringify"</code><code class="token punctuation">;</code>
<code class="token comment">// ring, получаем 4 символа, начиная с позиции 2</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">substr</code><code class="token punctuation">(</code><code class="token number">2</code><code class="token punctuation">,</code> <code class="token number">4</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(3);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>Значение первого аргумента может быть отрицательным, тогда позиция определяется с конца:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">"stringify"</code><code class="token punctuation">;</code>
<code class="token comment">// gi, получаем 2 символа, начиная с позиции 4 с конца строки</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str<code class="token punctuation">.</code><code class="token function">substr</code><code class="token punctuation">(</code><code class="token operator">-</code><code class="token number">4</code><code class="token punctuation">,</code> <code class="token number">2</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(3);</script>
                  </span>
                </div>
              </div>
            </div>
          </dd>
        </dl>
        <p>Давайте подытожим, как работают эти методы, чтобы не запутаться:</p>
        <table>
          <thead>
            <tr>
              <th>метод</th>
              <th>выбирает…</th>
              <th>отрицательные значения</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>slice(start, end)</code></td>
              <td>от <code>start</code> до <code>end</code> (не включая <code>end</code>)</td>
              <td>можно передавать отрицательные значения</td>
            </tr>
            <tr>
              <td><code>substring(start, end)</code></td>
              <td>между <code>start</code> и <code>end</code></td>
              <td>отрицательные значения равнозначны <code>0</code></td>
            </tr>
            <tr>
              <td><code>substr(start, length)</code></td>
              <td><code>length</code> символов, начиная от <code>start</code></td>
              <td>значение <code>start</code> может быть отрицательным</td>
            </tr>
          </tbody>
        </table>
        <div class="important important_smart">
          <div class="important__header"><span class="important__type">Какой метод выбрать?</span></div>
          <div class="important__content">
            <p>Все эти методы эффективно выполняют задачу. Формально у метода <code>substr</code> есть небольшой недостаток: он описан не в собственно спецификации JavaScript, а в приложении к ней — Annex B. Это приложение описывает возможности языка для использования в браузерах, существующие в основном по историческим причинам. Таким образом, в другом окружении, отличном от браузера, он может не поддерживаться. Однако на практике он работает везде.</p>
            <p>Из двух других вариантов, <code>slice</code> более гибок, он поддерживает отрицательные аргументы, и его короче писать. Так что, в принципе, можно запомнить только его.</p>
          </div>
        </div>
        <h2>Сравнение строк</h2>
        <p>Как мы знаем из главы <a href="/comparison">Операторы сравнения</a>, строки сравниваются посимвольно в алфавитном порядке.</p>
        <p>Тем не менее, есть некоторые нюансы.</p>
        <ol>
          <li>
            <p>Строчные буквы больше заглавных:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'a'</code> <code class="token operator">&gt;</code> <code class="token string">'Z'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(1);</script>
                  </span>
                </div>
              </div>
            </div>
          </li>
          <li>
            <p>Буквы, имеющие диакритические знаки, идут «не по порядку»:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Österreich'</code> <code class="token operator">&gt;</code> <code class="token string">'Zealand'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(1);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>Это может привести к своеобразным результатам при сортировке названий стран: нормально было бы ожидать, что <code>Zealand</code> будет после <code>Österreich</code> в списке.</p>
          </li>
        </ol>
        <p>Чтобы разобраться, что происходит, давайте ознакомимся с внутренним представлением строк в JavaScript.</p>
        <p>Строки кодируются в <a href="https://ru.wikipedia.org/wiki/UTF-16">UTF-16</a>. Таким образом, у любого символа есть соответствующий код. Есть специальные методы, позволяющие получить символ по его коду и наоборот.</p>
        <dl>
          <dt><code>str.codePointAt(pos)</code></dt>
          <dd>
            <p>Возвращает код для символа, находящегося на позиции <code>pos</code>:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token comment">// одна и та же буква в нижнем и верхнем регистре</code>
<code class="token comment">// будет иметь разные коды</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"z"</code><code class="token punctuation">.</code><code class="token function">codePointAt</code><code class="token punctuation">(</code><code class="token number">0</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 122</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"Z"</code><code class="token punctuation">.</code><code class="token function">codePointAt</code><code class="token punctuation">(</code><code class="token number">0</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 90</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(4);</script>
                  </span>
                </div>
              </div>
            </div>
          </dd>
          <dt><code>String.fromCodePoint(code)</code></dt>
          <dd>
            <p>Создаёт символ по его коду <code>code</code></p>
            <<div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> String<code class="token punctuation">.</code><code class="token function">fromCodePoint</code><code class="token punctuation">(</code><code class="token number">90</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// Z</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(1);</script>
                  </span>
                </div>
              </div>
            </div>
            <p>Также можно добавлять юникодные символы по их кодам, используя <code>\u</code> с шестнадцатеричным кодом символа:</p>
            <div class="code-example">
              <div class="codebox">
                <div class="line-numbers language-javascript">
                  <code class="language-javascript">
<pre>
<code class="token comment">// 90 — 5a в шестнадцатеричной системе счисления</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'\u005a'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// Z</code>
</pre>
                  </code>
                  <span class="line-numbers-rows">
                    <script src="../js/line-numbers-rows.js"></script>
                    <script>rowsNumbers(2);</script>
                  </span>
                </div>
              </div>
            </div>
          </dd>
        </dl>
        <p>Давайте сделаем строку, содержащую символы с кодами от <code>65</code> до <code>220</code> — это латиница и ещё некоторые распространённые символы:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> str <code class="token operator">=</code> <code class="token string">''</code><code class="token punctuation">;</code>

<code class="token keyword">for</code> <code class="token punctuation">(</code><code class="token keyword">let</code> i <code class="token operator">=</code> <code class="token number">65</code><code class="token punctuation">;</code> i <code class="token operator">&lt;=</code> <code class="token number">220</code><code class="token punctuation">;</code> i<code class="token operator">++</code><code class="token punctuation">)</code> <code class="token punctuation">{</code>
  str <code class="token operator">+=</code> String<code class="token punctuation">.</code><code class="token function">fromCodePoint</code><code class="token punctuation">(</code>i<code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token punctuation">}</code>
<code class="token function">alert</code><code class="token punctuation">(</code> str <code class="token punctuation">)</code><code class="token punctuation">;</code>
<code class="token comment">// ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~</code>
<code class="token comment">// ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜ</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(8);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Как видите, сначала идут заглавные буквы, затем несколько спецсимволов, затем строчные и <code>Ö</code> ближе к концу вывода.</p>
        <p>Теперь очевидно, почему <code>a &gt; Z</code>.</p>
        <p>Символы сравниваются по их кодам. Больший код — больший символ. Код <code>a</code> (97) больше кода <code>Z</code> (90).</p>
        <ul>
          <li>Все строчные буквы идут после заглавных, так как их коды больше.</li>
          <li>Некоторые буквы, такие как <code>Ö</code>, вообще находятся вне основного алфавита. У этой буквы код больше, чем у любой буквы от <code>a</code> до <code>z</code>.</li>
        </ul>
        <h3>Правильное сравнение</h3>
        <p>«Правильный» алгоритм сравнения строк сложнее, чем может показаться, так как разные языки используют разные алфавиты.</p>
        <p>Поэтому браузеру нужно знать, какой язык использовать для сравнения.</p>
        <p>К счастью, все современные браузеры (для IE10− нужна дополнительная библиотека <a href="https://github.com/andyearnshaw/Intl.js/">Intl.JS</a>) поддерживают стандарт <a href="http://www.ecma-international.org/ecma-402/1.0/ECMA-402.pdf">ECMA 402</a>, обеспечивающий правильное сравнение строк на разных языках с учётом их правил.</p>
        <p>Для этого есть соответствующий метод.</p>
        <p>Вызов <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare">str.localeCompare(str2)</a> возвращает число, которое показывает, какая строка больше в соответствии с правилами языка:</p>
        <ul>
          <li>Отрицательное число, если <code>str</code> меньше <code>str2</code>.</li>
          <li>Положительное число, если <code>str</code> больше <code>str2</code>.</li>
          <li><code>0</code>, если строки равны.</li>
        </ul>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'Österreich'</code><code class="token punctuation">.</code><code class="token function">localeCompare</code><code class="token punctuation">(</code><code class="token string">'Zealand'</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// -1</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>У этого метода есть два дополнительных аргумента, которые указаны в <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare">документации</a>. Первый позволяет указать язык (по умолчанию берётся из окружения) — от него зависит порядок букв. Второй — определить дополнительные правила, такие как чувствительность к регистру, а также следует ли учитывать различия между <code>"a"</code> и <code>"á"</code>.</p>
        <h2>Как всё устроено, Юникод</h2>
        <div class="important important_warn">
          <div class="important__header"><span class="important__type">Глубокое погружение в тему</span></div>
          <div class="important__content">
            <p>Этот раздел более подробно описывает, как устроены строки. Такие знания пригодятся, если вы намерены работать с эмодзи, редкими математическими символами, иероглифами, либо с ещё какими-то редкими символами.</p>
            <p>Если вы не планируете их поддерживать, эту секцию можно пропустить.</p>
          </div>
        </div>
        <h3>Суррогатные пары</h3>
        <p>Многие символы возможно записать одним 16-битным словом: это и буквы большинства европейских языков, и числа, и даже многие иероглифы.</p>
        <p>Но 16 битов — это 65536 комбинаций, так что на все символы этого, разумеется, не хватит. Поэтому редкие символы записываются двумя 16-битными словами — это также называется «суррогатная пара».</p>
        <p>Длина таких строк — <code>2</code>:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'𝒳'</code><code class="token punctuation">.</code>length <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 2, MATHEMATICAL SCRIPT CAPITAL X</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'😂'</code><code class="token punctuation">.</code>length <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 2, FACE WITH TEARS OF JOY</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'𩷶'</code><code class="token punctuation">.</code>length <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 2, редкий китайский иероглиф</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Обратите внимание, суррогатные пары не существовали, когда был создан JavaScript, поэтому язык не обрабатывает их адекватно!</p>
        <p>Ведь в каждой из этих строк только один символ, а <code>length</code> показывает длину <code>2</code>.</p>
        <p><code>String.fromCodePoint</code> и <code>str.codePointAt</code> — два редких метода, правильно работающие с суррогатными парами, но они и появились в языке недавно. До них были только <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/fromCharCode">String.fromCharCode</a> и <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt">str.charCodeAt</a>. Эти методы, вообще, делают то же самое, что <code>fromCodePoint/codePointAt</code>, но не работают с суррогатными парами.</p>
        <p>Получить символ, представленный суррогатной парой, может быть не так просто, потому что суррогатная пара интерпретируется как два символа:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'𝒳'</code><code class="token punctuation">[</code><code class="token number">0</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// странные символы…</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'𝒳'</code><code class="token punctuation">[</code><code class="token number">1</code><code class="token punctuation">]</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// …части суррогатной пары</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(2);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Части суррогатной пары не имеют смысла сами по себе, так что вызовы <code>alert</code> в этом примере покажут лишь мусор.</p>
        <p>Технически, суррогатные пары возможно обнаружить по их кодам: если код символа находится в диапазоне <code>0xd800..0xdbff</code>, то это — первая часть суррогатной пары. Следующий символ — вторая часть — имеет код в диапазоне <code>0xdc00..0xdfff</code>. Эти два диапазона выделены исключительно для суррогатных пар по стандарту.</p>
        <p>В данном случае:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token comment">// charCodeAt не поддерживает суррогатные пары, поэтому возвращает код для их частей</code>

<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'𝒳'</code><code class="token punctuation">.</code><code class="token function">charCodeAt</code><code class="token punctuation">(</code><code class="token number">0</code><code class="token punctuation">)</code><code class="token punctuation">.</code><code class="token function">toString</code><code class="token punctuation">(</code><code class="token number">16</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// d835, между 0xd800 и 0xdbff</code>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'𝒳'</code><code class="token punctuation">.</code><code class="token function">charCodeAt</code><code class="token punctuation">(</code><code class="token number">1</code><code class="token punctuation">)</code><code class="token punctuation">.</code><code class="token function">toString</code><code class="token punctuation">(</code><code class="token number">16</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// dcb3, между 0xdc00 и 0xdfff</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(4);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Дальше в главе <a href="/iterable">Перебираемые объекты</a> будут ещё способы работы с суррогатными парами. Для этого есть и специальные библиотеки, но нет достаточно широко известной, чтобы предложить её здесь.</p>
        <h3>Диакритические знаки и нормализация</h3>
        <p>Во многих языках есть символы, состоящие из некоторого основного символа со знаком сверху или снизу.</p>
        <p>Например, буква <code>a</code> — это основа для <code>àáâäãåā</code>. Наиболее используемые составные символы имеют свой собственный код в таблице UTF-16. Но не все, в силу большого количества комбинаций.</p>
        <p>Чтобы поддерживать любые комбинации, UTF-16 позволяет использовать несколько юникодных символов: основной и дальше один или несколько особых символов-знаков.</p>
        <p>Например, если после <code>S</code> добавить специальный символ «точка сверху» (код <code>\u0307</code>), отобразится Ṡ.</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'S\u0307'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// Ṡ</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Если надо добавить сверху (или снизу) ещё один знак — без проблем, просто добавляем соответствующий символ.</p>
        <p>Например, если добавить символ «точка снизу» (код <code>\u0323</code>), отобразится S с точками сверху и снизу: <code>Ṩ</code>.</p>
        <p>Добавляем два символа:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">'S\u0307\u0323'</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// Ṩ</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Это даёт большую гибкость, но из-за того, что порядок дополнительных символов может быть различным, мы получаем проблему сравнения символов: можно представить по-разному символы, которые ничем визуально не отличаются.</p>
        <p>Например:</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token keyword">let</code> s1 <code class="token operator">=</code> <code class="token string">'S\u0307\u0323'</code><code class="token punctuation">;</code> <code class="token comment">// Ṩ, S + точка сверху + точка снизу</code>
<code class="token keyword">let</code> s2 <code class="token operator">=</code> <code class="token string">'S\u0323\u0307'</code><code class="token punctuation">;</code> <code class="token comment">// Ṩ, S + точка снизу + точка сверху</code>

<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token template-string"><code class="token string">`s1: </code><code class="token interpolation"><code class="token interpolation-punctuation punctuation">${</code>s1<code class="token interpolation-punctuation punctuation">}</code></code><code class="token string">, s2: </code><code class="token interpolation"><code class="token interpolation-punctuation punctuation">${</code>s2<code class="token interpolation-punctuation punctuation">}</code></code><code class="token string">`</code></code> <code class="token punctuation">)</code><code class="token punctuation">;</code>

<code class="token function">alert</code><code class="token punctuation">(</code> s1 <code class="token operator">==</code> s2 <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// false, хотя на вид символы одинаковы (?!)</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(12);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Для решения этой проблемы есть алгоритм «юникодной нормализации», приводящий каждую строку к единому «нормальному» виду.</p>
        <p>Его реализует метод <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/normalize">str.normalize()</a>.</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"S\u0307\u0323"</code><code class="token punctuation">.</code><code class="token function">normalize</code><code class="token punctuation">(</code><code class="token punctuation">)</code> <code class="token operator">==</code> <code class="token string">"S\u0323\u0307"</code><code class="token punctuation">.</code><code class="token function">normalize</code><code class="token punctuation">(</code><code class="token punctuation">)</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(1);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Забавно, но в нашем случае <code>normalize()</code> «схлопывает» последовательность из трёх символов в один: <code>\u1e68</code> — S с двумя точками.</p>
        <div class="code-example">
          <div class="codebox">
            <div class="line-numbers language-javascript">
              <code class="language-javascript">
<pre>
<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"S\u0307\u0323"</code><code class="token punctuation">.</code><code class="token function">normalize</code><code class="token punctuation">(</code><code class="token punctuation">)</code><code class="token punctuation">.</code>length <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// 1</code>

<code class="token function">alert</code><code class="token punctuation">(</code> <code class="token string">"S\u0307\u0323"</code><code class="token punctuation">.</code><code class="token function">normalize</code><code class="token punctuation">(</code><code class="token punctuation">)</code> <code class="token operator">==</code> <code class="token string">"\u1e68"</code> <code class="token punctuation">)</code><code class="token punctuation">;</code> <code class="token comment">// true</code>
</pre>
              </code>
              <span class="line-numbers-rows">
                <script src="../js/line-numbers-rows.js"></script>
                <script>rowsNumbers(3);</script>
              </span>
            </div>
          </div>
        </div>
        <p>Разумеется, так происходит не всегда. Просто Ṩ — это достаточно часто используемый символ, поэтому создатели UTF-16 включили его в основную таблицу и присвоили ему код.</p>
        <p>Подробнее о правилах нормализации и составлении символов можно прочитать в дополнении к стандарту Юникод: <a href="http://www.unicode.org/reports/tr15/">Unicode Normalization Forms</a>. Для большинства практических целей информации из этого раздела достаточно.</p>
      </div>
    </div>
  </div>
</body>

</html>